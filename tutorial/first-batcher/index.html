<!doctype html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=G-9KP7VJY00K"></script><script>window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-9KP7VJY00K');</script><meta charset="UTF-8"><meta content="width=device-width,initial-scale=1" name="viewport"><style type="text/css">/*! tailwindcss v4.1.11 | MIT License | https://tailwindcss.com */
@layer properties{@supports (((-webkit-hyphens:none)) and (not (margin-trim:inline))) or ((-moz-orient:inline) and (not (color:rgb(from red r g b)))){*,:before,:after,::backdrop{--tw-border-style:solid;--tw-leading:initial;--tw-translate-x:0;--tw-translate-y:0;--tw-translate-z:0;--tw-rotate-x:initial;--tw-rotate-y:initial;--tw-rotate-z:initial;--tw-skew-x:initial;--tw-skew-y:initial;--tw-space-y-reverse:0;--tw-font-weight:initial;--tw-tracking:initial;--tw-duration:initial;--tw-ease:initial;--tw-content:""}}}@layer theme{:root,:host{--font-sans:Inter,sans-serif;--font-mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--color-stone-50:oklch(98.5% .001 106.423);--color-stone-100:oklch(97% .001 106.424);--color-stone-200:oklch(92.3% .003 48.717);--color-stone-300:oklch(86.9% .005 56.366);--color-stone-400:oklch(70.9% .01 56.259);--color-stone-500:oklch(55.3% .013 58.071);--color-stone-600:oklch(44.4% .011 73.639);--color-stone-700:oklch(37.4% .01 67.558);--color-stone-800:oklch(26.8% .007 34.298);--color-stone-900:oklch(21.6% .006 56.043);--color-black:#000;--color-white:#fff;--spacing:.25rem;--container-xs:20rem;--container-sm:24rem;--container-7xl:80rem;--text-xs:.75rem;--text-xs--line-height:calc(1/.75);--text-sm:.875rem;--text-sm--line-height:calc(1.25/.875);--text-base:1rem;--text-base--line-height:calc(1.5/1);--text-lg:1.125rem;--text-lg--line-height:calc(1.75/1.125);--font-weight-medium:500;--font-weight-semibold:600;--tracking-wide:.025em;--leading-normal:1.5;--ease-out:cubic-bezier(0,0,.2,1);--default-transition-duration:.15s;--default-transition-timing-function:cubic-bezier(.4,0,.2,1);--default-font-family:var(--font-sans);--default-mono-font-family:var(--font-mono);--color-code-blue:#3498db;--color-code-gray:#5c6370;--color-code-dark:#263040;--color-code-green:#2ecc71;--color-code-indigo:#6c71c4;--color-code-orange:#e67e22;--color-code-red:#e74c3c;--color-code-yellow:#f1c40f;--color-code-white:#efefef;--color-code-header:#111;--color-code:#080808;--spacing-2px:2px}}@layer base{*,:after,:before,::backdrop{box-sizing:border-box;border:0 solid;margin:0;padding:0}::file-selector-button{box-sizing:border-box;border:0 solid;margin:0;padding:0}html,:host{-webkit-text-size-adjust:100%;tab-size:4;line-height:1.5;font-family:var(--default-font-family,ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji");font-feature-settings:var(--default-font-feature-settings,normal);font-variation-settings:var(--default-font-variation-settings,normal);-webkit-tap-highlight-color:transparent}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;-webkit-text-decoration:inherit;-webkit-text-decoration:inherit;-webkit-text-decoration:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:var(--default-mono-font-family,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace);font-feature-settings:var(--default-mono-font-feature-settings,normal);font-variation-settings:var(--default-mono-font-variation-settings,normal);font-size:1em}small{font-size:80%}sub,sup{vertical-align:baseline;font-size:75%;line-height:0;position:relative}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}:-moz-focusring{outline:auto}progress{vertical-align:baseline}summary{display:list-item}ol,ul,menu{list-style:none}img,svg,video,canvas,audio,iframe,embed,object{vertical-align:middle;display:block}img,video{max-width:100%;height:auto}button,input,select,optgroup,textarea{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}::file-selector-button{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}:where(select:is([multiple],[size])) optgroup{font-weight:bolder}:where(select:is([multiple],[size])) optgroup option{padding-inline-start:20px}::file-selector-button{margin-inline-end:4px}::placeholder{opacity:1}@supports (not ((-webkit-appearance:-apple-pay-button))) or (contain-intrinsic-size:1px){::placeholder{color:currentColor}@supports (color:color-mix(in lab, red, red)){::placeholder{color:color-mix(in oklab,currentcolor 50%,transparent)}}}textarea{resize:vertical}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-date-and-time-value{min-height:1lh;text-align:inherit}::-webkit-datetime-edit{display:inline-flex}::-webkit-datetime-edit-fields-wrapper{padding:0}::-webkit-datetime-edit{padding-block:0}::-webkit-datetime-edit-year-field{padding-block:0}::-webkit-datetime-edit-month-field{padding-block:0}::-webkit-datetime-edit-day-field{padding-block:0}::-webkit-datetime-edit-hour-field{padding-block:0}::-webkit-datetime-edit-minute-field{padding-block:0}::-webkit-datetime-edit-second-field{padding-block:0}::-webkit-datetime-edit-millisecond-field{padding-block:0}::-webkit-datetime-edit-meridiem-field{padding-block:0}:-moz-ui-invalid{box-shadow:none}button,input:where([type=button],[type=reset],[type=submit]){appearance:button}::file-selector-button{appearance:button}::-webkit-inner-spin-button{height:auto}::-webkit-outer-spin-button{height:auto}[hidden]:where(:not([hidden=until-found])){display:none!important}}@layer components;@layer utilities{.code-highlight{margin-inline:calc(var(--spacing)*0);margin-block:calc(var(--spacing)*3);border-top-style:var(--tw-border-style);border-top-width:1px;border-color:var(--color-stone-100);background-color:var(--color-code);padding-inline:calc(var(--spacing)*0);color:var(--color-code-white);border-radius:.25rem;display:grid;position:relative}@media (prefers-color-scheme:dark){.code-highlight{border-color:var(--color-stone-900)}}.code-highlight:before{content:attr(lang);color:var(--color-code-white);font-size:.75rem;position:absolute;top:5px;right:10px}.code-highlight .line-numbers{letter-spacing:-1px;pointer-events:none;float:left;border-right-style:var(--tw-border-style);border-right-width:1px;border-color:var(--color-code-dark);text-align:right;-webkit-user-select:none;user-select:none;margin-right:.8rem;padding-right:.8rem;font-size:100%}.code-highlight .line-numbers>span{counter-increment:linenumber;display:block}.code-highlight .line-numbers>span:before{content:counter(linenumber);color:var(--color-code-gray);display:block}.code-highlight .syntax{text-shadow:none;box-shadow:none;-webkit-user-select:text;user-select:text;margin:calc(var(--spacing)*0);padding-inline:calc(var(--spacing)*6);padding-block:calc(var(--spacing)*5);--tw-leading:var(--leading-normal);line-height:var(--leading-normal);white-space:pre;background-color:#0000;font-size:0;position:relative;overflow:auto}.code-highlight .syntax::-webkit-scrollbar{display:none}.code-highlight .syntax code{color:var(--color-code-white);font-size:.875rem}.code-highlight .comment{color:var(--color-code-gray)}.code-highlight .boolean,.code-highlight .number{color:var(--color-code-indigo)}.code-highlight .directive,.code-highlight .keyword{color:var(--color-code-red)}.code-highlight .keyword-function,.code-highlight .keyword-override,.code-highlight .keyword-private,.code-highlight .keyword-protected,.code-highlight .keyword-public,.code-highlight .keyword-static{color:var(--color-code-blue)}.code-highlight .key{color:var(--color-code-orange)}.code-highlight .function{color:var(--color-code-green)}.code-highlight .operator{color:var(--color-code-red)}.code-highlight .string{color:var(--color-code-yellow)}.code-highlight .class-name{color:var(--color-code-orange)}.code-highlight .title{color:var(--color-code-blue)}.code-highlight .type-list .class-name,.code-highlight .namespace{color:var(--color-code-green)}.code-select{-webkit-user-select:all;user-select:all;background-color:var(--color-stone-300);padding-top:calc(var(--spacing)*3);border-radius:.25rem;margin-bottom:1.2em;position:relative}@media (prefers-color-scheme:dark){.code-select{background-color:var(--color-code-header)}}@media print{.code-select{padding-top:calc(var(--spacing)*0)}}.code-select:before{content:"select";pointer-events:none;color:var(--color-stone-600);font-size:.75rem;position:absolute;top:1px;right:24px}@media (prefers-color-scheme:dark){.code-select:before{color:var(--color-stone-400)}}@media print{.code-select:before{display:none}}.code-select:after{content:"";pointer-events:none;height:calc(var(--spacing)*4);width:calc(var(--spacing)*4);background-color:var(--color-stone-600);font-size:.75rem;position:absolute;top:3px;right:3px;-webkit-mask:url("data:image/svg+xml; utf8, <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\" /></svg>");mask:url("data:image/svg+xml; utf8, <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\" /></svg>")}@media (prefers-color-scheme:dark){.code-select:after{background-color:var(--color-stone-400)}}@media print{.code-select:after{display:none}}.pointer-events-auto{pointer-events:auto}.pointer-events-none{pointer-events:none}.invisible{visibility:hidden}.sr-only{clip:rect(0,0,0,0);white-space:nowrap;border-width:0;width:1px;height:1px;margin:-1px;padding:0;position:absolute;overflow:hidden}.absolute{position:absolute}.fixed{position:fixed}.relative{position:relative}.static{position:static}.sticky{position:sticky}.inset-0{inset:calc(var(--spacing)*0)}.top-0{top:calc(var(--spacing)*0)}.left-0{left:calc(var(--spacing)*0)}.z-10{z-index:10}.z-20{z-index:20}.mx-auto{margin-inline:auto}.prose{color:var(--tw-prose-body);max-width:65ch}.prose :where(p):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.25em;margin-bottom:1.25em}.prose :where([class~=lead]):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-lead);margin-top:1.2em;margin-bottom:1.2em;font-size:1.25em;line-height:1.6}.prose :where(a):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-links);font-weight:500;text-decoration:underline}.prose :where(strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-bold);font-weight:600}.prose :where(a strong):not(:where([class~=not-prose],[class~=not-prose] *)),.prose :where(blockquote strong):not(:where([class~=not-prose],[class~=not-prose] *)),.prose :where(thead th strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(ol):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.25em;margin-bottom:1.25em;padding-inline-start:1.625em;list-style-type:decimal}.prose :where(ol[type=A]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:upper-alpha}.prose :where(ol[type=a]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:lower-alpha}.prose :where(ol[type=A s]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:upper-alpha}.prose :where(ol[type=a s]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:lower-alpha}.prose :where(ol[type=I]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:upper-roman}.prose :where(ol[type=i]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:lower-roman}.prose :where(ol[type=I s]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:upper-roman}.prose :where(ol[type=i s]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:lower-roman}.prose :where(ol[type="1"]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:decimal}.prose :where(ul):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.25em;margin-bottom:1.25em;padding-inline-start:1.625em;list-style-type:disc}.prose :where(ol>li):not(:where([class~=not-prose],[class~=not-prose] *))::marker{color:var(--tw-prose-counters);font-weight:400}.prose :where(ul>li):not(:where([class~=not-prose],[class~=not-prose] *))::marker{color:var(--tw-prose-bullets)}.prose :where(dt):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);margin-top:1.25em;font-weight:600}.prose :where(hr):not(:where([class~=not-prose],[class~=not-prose] *)){border-color:var(--tw-prose-hr);border-top-width:1px;margin-top:3em;margin-bottom:3em}.prose :where(blockquote):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-quotes);border-inline-start-width:.25rem;border-inline-start-color:var(--tw-prose-quote-borders);quotes:"“""”""‘""’";margin-top:1.6em;margin-bottom:1.6em;padding-inline-start:1em;font-style:italic;font-weight:500}.prose :where(blockquote p:first-of-type):not(:where([class~=not-prose],[class~=not-prose] *)):before{content:open-quote}.prose :where(blockquote p:last-of-type):not(:where([class~=not-prose],[class~=not-prose] *)):after{content:close-quote}.prose :where(h1):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);margin-top:0;margin-bottom:.888889em;font-size:2.25em;font-weight:800;line-height:1.11111}.prose :where(h1 strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit;font-weight:900}.prose :where(h2):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);margin-top:2em;margin-bottom:1em;font-size:1.5em;font-weight:700;line-height:1.33333}.prose :where(h2 strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit;font-weight:800}.prose :where(h3):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);margin-top:1.6em;margin-bottom:.6em;font-size:1.25em;font-weight:600;line-height:1.6}.prose :where(h3 strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit;font-weight:700}.prose :where(h4):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);margin-top:1.5em;margin-bottom:.5em;font-weight:600;line-height:1.5}.prose :where(h4 strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit;font-weight:700}.prose :where(img):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:2em;margin-bottom:2em}.prose :where(picture):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:2em;margin-bottom:2em;display:block}.prose :where(video):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:2em;margin-bottom:2em}.prose :where(kbd):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-kbd);box-shadow:0 0 0 1px rgb(var(--tw-prose-kbd-shadows)/10%),0 3px 0 rgb(var(--tw-prose-kbd-shadows)/10%);padding-top:.1875em;padding-inline-end:.375em;padding-bottom:.1875em;border-radius:.3125rem;padding-inline-start:.375em;font-family:inherit;font-size:.875em;font-weight:500}.prose :where(code):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-code);font-size:.875em;font-weight:600}.prose :where(code):not(:where([class~=not-prose],[class~=not-prose] *)):before,.prose :where(code):not(:where([class~=not-prose],[class~=not-prose] *)):after{content:"`"}.prose :where(a code):not(:where([class~=not-prose],[class~=not-prose] *)),.prose :where(h1 code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(h2 code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit;font-size:.875em}.prose :where(h3 code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit;font-size:.9em}.prose :where(h4 code):not(:where([class~=not-prose],[class~=not-prose] *)),.prose :where(blockquote code):not(:where([class~=not-prose],[class~=not-prose] *)),.prose :where(thead th code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(pre):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-pre-code);background-color:var(--tw-prose-pre-bg);padding-top:.857143em;padding-inline-end:1.14286em;padding-bottom:.857143em;border-radius:.375rem;margin-top:1.71429em;margin-bottom:1.71429em;padding-inline-start:1.14286em;font-size:.875em;font-weight:400;line-height:1.71429;overflow-x:auto}.prose :where(pre code):not(:where([class~=not-prose],[class~=not-prose] *)){font-weight:inherit;color:inherit;font-size:inherit;font-family:inherit;line-height:inherit;background-color:#0000;border-width:0;border-radius:0;padding:0}.prose :where(pre code):not(:where([class~=not-prose],[class~=not-prose] *)):before,.prose :where(pre code):not(:where([class~=not-prose],[class~=not-prose] *)):after{content:none}.prose :where(table):not(:where([class~=not-prose],[class~=not-prose] *)){table-layout:auto;width:100%;margin-top:2em;margin-bottom:2em;font-size:.875em;line-height:1.71429}.prose :where(thead):not(:where([class~=not-prose],[class~=not-prose] *)){border-bottom-width:1px;border-bottom-color:var(--tw-prose-th-borders)}.prose :where(thead th):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);vertical-align:bottom;padding-inline-end:.571429em;padding-bottom:.571429em;padding-inline-start:.571429em;font-weight:600}.prose :where(tbody tr):not(:where([class~=not-prose],[class~=not-prose] *)){border-bottom-width:1px;border-bottom-color:var(--tw-prose-td-borders)}.prose :where(tbody tr:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){border-bottom-width:0}.prose :where(tbody td):not(:where([class~=not-prose],[class~=not-prose] *)){vertical-align:baseline}.prose :where(tfoot):not(:where([class~=not-prose],[class~=not-prose] *)){border-top-width:1px;border-top-color:var(--tw-prose-th-borders)}.prose :where(tfoot td):not(:where([class~=not-prose],[class~=not-prose] *)){vertical-align:top}.prose :where(th,td):not(:where([class~=not-prose],[class~=not-prose] *)){text-align:start}.prose :where(figure>*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0;margin-bottom:0}.prose :where(figcaption):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-captions);margin-top:.857143em;font-size:.875em;line-height:1.42857}.prose{--tw-prose-body:oklch(37.3% .034 259.733);--tw-prose-headings:oklch(21% .034 264.665);--tw-prose-lead:oklch(44.6% .03 256.802);--tw-prose-links:oklch(21% .034 264.665);--tw-prose-bold:oklch(21% .034 264.665);--tw-prose-counters:oklch(55.1% .027 264.364);--tw-prose-bullets:oklch(87.2% .01 258.338);--tw-prose-hr:oklch(92.8% .006 264.531);--tw-prose-quotes:oklch(21% .034 264.665);--tw-prose-quote-borders:oklch(92.8% .006 264.531);--tw-prose-captions:oklch(55.1% .027 264.364);--tw-prose-kbd:oklch(21% .034 264.665);--tw-prose-kbd-shadows:NaN NaN NaN;--tw-prose-code:oklch(21% .034 264.665);--tw-prose-pre-code:oklch(92.8% .006 264.531);--tw-prose-pre-bg:oklch(27.8% .033 256.848);--tw-prose-th-borders:oklch(87.2% .01 258.338);--tw-prose-td-borders:oklch(92.8% .006 264.531);--tw-prose-invert-body:oklch(87.2% .01 258.338);--tw-prose-invert-headings:#fff;--tw-prose-invert-lead:oklch(70.7% .022 261.325);--tw-prose-invert-links:#fff;--tw-prose-invert-bold:#fff;--tw-prose-invert-counters:oklch(70.7% .022 261.325);--tw-prose-invert-bullets:oklch(44.6% .03 256.802);--tw-prose-invert-hr:oklch(37.3% .034 259.733);--tw-prose-invert-quotes:oklch(96.7% .003 264.542);--tw-prose-invert-quote-borders:oklch(37.3% .034 259.733);--tw-prose-invert-captions:oklch(70.7% .022 261.325);--tw-prose-invert-kbd:#fff;--tw-prose-invert-kbd-shadows:255 255 255;--tw-prose-invert-code:#fff;--tw-prose-invert-pre-code:oklch(87.2% .01 258.338);--tw-prose-invert-pre-bg:#00000080;--tw-prose-invert-th-borders:oklch(44.6% .03 256.802);--tw-prose-invert-td-borders:oklch(37.3% .034 259.733);font-size:1rem;line-height:1.75}.prose :where(picture>img):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0;margin-bottom:0}.prose :where(li):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.5em;margin-bottom:.5em}.prose :where(ol>li):not(:where([class~=not-prose],[class~=not-prose] *)),.prose :where(ul>li):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:.375em}.prose :where(.prose>ul>li p):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.75em;margin-bottom:.75em}.prose :where(.prose>ul>li>p:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.25em}.prose :where(.prose>ul>li>p:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.25em}.prose :where(.prose>ol>li>p:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.25em}.prose :where(.prose>ol>li>p:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.25em}.prose :where(ul ul,ul ol,ol ul,ol ol):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.75em;margin-bottom:.75em}.prose :where(dl):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.25em;margin-bottom:1.25em}.prose :where(dd):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.5em;padding-inline-start:1.625em}.prose :where(hr+*):not(:where([class~=not-prose],[class~=not-prose] *)),.prose :where(h2+*):not(:where([class~=not-prose],[class~=not-prose] *)),.prose :where(h3+*):not(:where([class~=not-prose],[class~=not-prose] *)),.prose :where(h4+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose :where(thead th:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:0}.prose :where(thead th:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-end:0}.prose :where(tbody td,tfoot td):not(:where([class~=not-prose],[class~=not-prose] *)){padding-top:.571429em;padding-inline-end:.571429em;padding-bottom:.571429em;padding-inline-start:.571429em}.prose :where(tbody td:first-child,tfoot td:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:0}.prose :where(tbody td:last-child,tfoot td:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-end:0}.prose :where(figure):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:2em;margin-bottom:2em}.prose :where(.prose>:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose :where(.prose>:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:0}.mt-1{margin-top:calc(var(--spacing)*1)}.mr-4{margin-right:calc(var(--spacing)*4)}.mb-3{margin-bottom:calc(var(--spacing)*3)}.-ml-px{margin-left:-1px}.ml-0{margin-left:calc(var(--spacing)*0)}.ml-4{margin-left:calc(var(--spacing)*4)}.block{display:block}.contents{display:contents}.flex{display:flex}.hidden{display:none}.inline-block{display:inline-block}.h-0{height:calc(var(--spacing)*0)}.h-2px{height:var(--spacing-2px)}.h-6{height:calc(var(--spacing)*6)}.h-16{height:calc(var(--spacing)*16)}.h-auto{height:auto}.h-full{height:100%}.h-screen{height:100vh}.max-h-screen{max-height:100vh}.w-5{width:calc(var(--spacing)*5)}.w-6{width:calc(var(--spacing)*6)}.w-14{width:calc(var(--spacing)*14)}.w-64{width:calc(var(--spacing)*64)}.w-full{width:100%}.w-screen{width:100vw}.max-w-7xl{max-width:var(--container-7xl)}.max-w-sm{max-width:var(--container-sm)}.max-w-xs{max-width:var(--container-xs)}.flex-1{flex:1}.flex-none{flex:none}.shrink-0{flex-shrink:0}.grow{flex-grow:1}.-translate-x-full{--tw-translate-x:-100%;translate:var(--tw-translate-x)var(--tw-translate-y)}.transform{transform:var(--tw-rotate-x,)var(--tw-rotate-y,)var(--tw-rotate-z,)var(--tw-skew-x,)var(--tw-skew-y,)}.cursor-pointer{cursor:pointer}.flex-col{flex-direction:column}.flex-row-reverse{flex-direction:row-reverse}.items-center{align-items:center}.justify-center{justify-content:center}.justify-end{justify-content:flex-end}:where(.space-y-1>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*1)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*1)*calc(1 - var(--tw-space-y-reverse)))}.overflow-x-hidden{overflow-x:hidden}.overflow-y-auto{overflow-y:auto}.overflow-y-hidden{overflow-y:hidden}.border-r{border-right-style:var(--tw-border-style);border-right-width:1px}.border-stone-200{border-color:var(--color-stone-200)}.bg-stone-50{background-color:var(--color-stone-50)}.bg-stone-100{background-color:var(--color-stone-100)}.bg-stone-500{background-color:var(--color-stone-500)}.bg-stone-600{background-color:var(--color-stone-600)}.p-2{padding:calc(var(--spacing)*2)}.px-2{padding-inline:calc(var(--spacing)*2)}.px-4{padding-inline:calc(var(--spacing)*4)}.px-6{padding-inline:calc(var(--spacing)*6)}.py-0{padding-block:calc(var(--spacing)*0)}.py-2{padding-block:calc(var(--spacing)*2)}.py-5{padding-block:calc(var(--spacing)*5)}.py-8{padding-block:calc(var(--spacing)*8)}.pt-20{padding-top:calc(var(--spacing)*20)}.pb-8{padding-bottom:calc(var(--spacing)*8)}.text-base{font-size:var(--text-base);line-height:var(--tw-leading,var(--text-base--line-height))}.text-lg{font-size:var(--text-lg);line-height:var(--tw-leading,var(--text-lg--line-height))}.text-sm{font-size:var(--text-sm);line-height:var(--tw-leading,var(--text-sm--line-height))}.leading-6{--tw-leading:calc(var(--spacing)*6);line-height:calc(var(--spacing)*6)}.font-medium{--tw-font-weight:var(--font-weight-medium);font-weight:var(--font-weight-medium)}.font-semibold{--tw-font-weight:var(--font-weight-semibold);font-weight:var(--font-weight-semibold)}.tracking-wide{--tw-tracking:var(--tracking-wide);letter-spacing:var(--tracking-wide)}.break-anywhere{overflow-wrap:anywhere}.break-words{overflow-wrap:break-word}.edit-link{color:var(--color-stone-700)!important}@media (hover:hover){.edit-link:hover{color:var(--color-stone-900)!important}}@media (prefers-color-scheme:dark){.edit-link{color:var(--color-stone-400)!important}@media (hover:hover){.edit-link:hover{color:var(--color-stone-100)!important}}}.text-stone-400{color:var(--color-stone-400)}.text-stone-500{color:var(--color-stone-500)}.text-stone-600{color:var(--color-stone-600)}.text-stone-900{color:var(--color-stone-900)}.uppercase{text-transform:uppercase}.underline{text-decoration-line:underline}.opacity-0{opacity:0}.transition-colors{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-opacity{transition-property:opacity;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.duration-300{--tw-duration:.3s;transition-duration:.3s}.ease-out{--tw-ease:var(--ease-out);transition-timing-function:var(--ease-out)}.prose-stone{--tw-prose-body:oklch(37.4% .01 67.558);--tw-prose-headings:oklch(21.6% .006 56.043);--tw-prose-lead:oklch(44.4% .011 73.639);--tw-prose-links:oklch(21.6% .006 56.043);--tw-prose-bold:oklch(21.6% .006 56.043);--tw-prose-counters:oklch(55.3% .013 58.071);--tw-prose-bullets:oklch(86.9% .005 56.366);--tw-prose-hr:oklch(92.3% .003 48.717);--tw-prose-quotes:oklch(21.6% .006 56.043);--tw-prose-quote-borders:oklch(92.3% .003 48.717);--tw-prose-captions:oklch(55.3% .013 58.071);--tw-prose-kbd:oklch(21.6% .006 56.043);--tw-prose-kbd-shadows:NaN NaN NaN;--tw-prose-code:oklch(21.6% .006 56.043);--tw-prose-pre-code:oklch(92.3% .003 48.717);--tw-prose-pre-bg:oklch(26.8% .007 34.298);--tw-prose-th-borders:oklch(86.9% .005 56.366);--tw-prose-td-borders:oklch(92.3% .003 48.717);--tw-prose-invert-body:oklch(86.9% .005 56.366);--tw-prose-invert-headings:#fff;--tw-prose-invert-lead:oklch(70.9% .01 56.259);--tw-prose-invert-links:#fff;--tw-prose-invert-bold:#fff;--tw-prose-invert-counters:oklch(70.9% .01 56.259);--tw-prose-invert-bullets:oklch(44.4% .011 73.639);--tw-prose-invert-hr:oklch(37.4% .01 67.558);--tw-prose-invert-quotes:oklch(97% .001 106.424);--tw-prose-invert-quote-borders:oklch(37.4% .01 67.558);--tw-prose-invert-captions:oklch(70.9% .01 56.259);--tw-prose-invert-kbd:#fff;--tw-prose-invert-kbd-shadows:255 255 255;--tw-prose-invert-code:#fff;--tw-prose-invert-pre-code:oklch(86.9% .005 56.366);--tw-prose-invert-pre-bg:#00000080;--tw-prose-invert-th-borders:oklch(44.4% .011 73.639);--tw-prose-invert-td-borders:oklch(37.4% .01 67.558)}.select-none{-webkit-user-select:none;user-select:none}@media (hover:hover){.group-hover\:text-stone-500:is(:where(.group):hover *){color:var(--color-stone-500)}}.group-focus\:text-stone-500:is(:where(.group):focus *){color:var(--color-stone-500)}.peer-checked\:pointer-events-auto:is(:where(.peer):checked~*){pointer-events:auto}.peer-checked\:visible:is(:where(.peer):checked~*){visibility:visible}.peer-checked\:left-full:is(:where(.peer):checked~*){left:100%}.peer-checked\:-ml-16:is(:where(.peer):checked~*){margin-left:calc(var(--spacing)*-16)}.peer-checked\:translate-x-0:is(:where(.peer):checked~*){--tw-translate-x:calc(var(--spacing)*0);translate:var(--tw-translate-x)var(--tw-translate-y)}.peer-checked\:opacity-75:is(:where(.peer):checked~*){opacity:.75}:is(.peer-checked\:\*\:bg-transparent\!:is(:where(.peer):checked~*)>*){background-color:#0000!important}:is(.peer-focus\:\*\:bg-stone-900:is(:where(.peer):focus~*)>*){background-color:var(--color-stone-900)}.before\:absolute:before{content:var(--tw-content);position:absolute}.before\:block:before{content:var(--tw-content);display:block}.before\:h-full:before{content:var(--tw-content);height:100%}.before\:w-1\/2:before{content:var(--tw-content);width:50%}.before\:transform:before{content:var(--tw-content);transform:var(--tw-rotate-x,)var(--tw-rotate-y,)var(--tw-rotate-z,)var(--tw-skew-x,)var(--tw-skew-y,)}.before\:bg-stone-500:before{content:var(--tw-content);background-color:var(--color-stone-500)}.before\:transition-all:before{content:var(--tw-content);transition-property:all;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.before\:duration-500:before{content:var(--tw-content);--tw-duration:.5s;transition-duration:.5s}.before\:ease-out:before{content:var(--tw-content);--tw-ease:var(--ease-out);transition-timing-function:var(--ease-out)}.before\:content-\[\'\'\]:before{content:var(--tw-content);--tw-content:"";content:var(--tw-content)}:is(.peer-checked\:\*\:before\:top-0:is(:where(.peer):checked~*)>*):before{content:var(--tw-content);top:calc(var(--spacing)*0)}:is(.peer-checked\:\*\:before\:w-full:is(:where(.peer):checked~*)>*):before{content:var(--tw-content);width:100%}:is(.peer-checked\:\*\:before\:-rotate-45:is(:where(.peer):checked~*)>*):before{content:var(--tw-content);rotate:-45deg}:is(.peer-checked\:\*\:before\:bg-white:is(:where(.peer):checked~*)>*):before{content:var(--tw-content);background-color:var(--color-white)}:is(.peer-focus\:\*\:before\:bg-stone-900:is(:where(.peer):focus~*)>*):before{content:var(--tw-content);background-color:var(--color-stone-900)}.after\:absolute:after{content:var(--tw-content);position:absolute}.after\:block:after{content:var(--tw-content);display:block}.after\:h-full:after{content:var(--tw-content);height:100%}.after\:w-full:after{content:var(--tw-content);width:100%}.after\:transform:after{content:var(--tw-content);transform:var(--tw-rotate-x,)var(--tw-rotate-y,)var(--tw-rotate-z,)var(--tw-skew-x,)var(--tw-skew-y,)}.after\:bg-stone-500:after{content:var(--tw-content);background-color:var(--color-stone-500)}.after\:transition-all:after{content:var(--tw-content);transition-property:all;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.after\:duration-500:after{content:var(--tw-content);--tw-duration:.5s;transition-duration:.5s}.after\:ease-out:after{content:var(--tw-content);--tw-ease:var(--ease-out);transition-timing-function:var(--ease-out)}.after\:content-\[\'\'\]:after{content:var(--tw-content);--tw-content:"";content:var(--tw-content)}:is(.peer-checked\:\*\:after\:top-0:is(:where(.peer):checked~*)>*):after{content:var(--tw-content);top:calc(var(--spacing)*0)}:is(.peer-checked\:\*\:after\:rotate-45:is(:where(.peer):checked~*)>*):after{content:var(--tw-content);rotate:45deg}:is(.peer-checked\:\*\:after\:bg-white:is(:where(.peer):checked~*)>*):after{content:var(--tw-content);background-color:var(--color-white)}:is(.peer-focus\:\*\:after\:bg-stone-900:is(:where(.peer):focus~*)>*):after{content:var(--tw-content);background-color:var(--color-stone-900)}@media (hover:hover){.hover\:text-stone-500:hover{color:var(--color-stone-500)}.hover\:text-stone-900:hover{color:var(--color-stone-900)}}.focus\:text-black:focus{color:var(--color-black)}.focus\:outline-none:focus{--tw-outline-style:none;outline-style:none}@media (min-width:40rem){.sm\:px-6{padding-inline:calc(var(--spacing)*6)}}@media (min-width:48rem){.md\:visible{visibility:visible}.md\:sticky{position:sticky}.md\:mr-3{margin-right:calc(var(--spacing)*3)}.md\:flex{display:flex}.md\:hidden{display:none}.md\:h-16{height:calc(var(--spacing)*16)}.md\:w-64{width:calc(var(--spacing)*64)}.md\:flex-1{flex:1}.md\:flex-initial{flex:0 auto}.md\:translate-x-0{--tw-translate-x:calc(var(--spacing)*0);translate:var(--tw-translate-x)var(--tw-translate-y)}.md\:flex-col{flex-direction:column}.md\:px-8{padding-inline:calc(var(--spacing)*8)}.md\:py-0{padding-block:calc(var(--spacing)*0)}.md\:py-4{padding-block:calc(var(--spacing)*4)}.md\:py-12{padding-block:calc(var(--spacing)*12)}.md\:pb-0{padding-bottom:calc(var(--spacing)*0)}.md\:text-sm{font-size:var(--text-sm);line-height:var(--tw-leading,var(--text-sm--line-height))}.md\:leading-5{--tw-leading:calc(var(--spacing)*5);line-height:calc(var(--spacing)*5)}.md\:transition-none{transition-property:none}}@media (min-width:64rem){.lg\:prose-lg{font-size:1.125rem;line-height:1.77778}.lg\:prose-lg :where(p):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.33333em;margin-bottom:1.33333em}.lg\:prose-lg :where([class~=lead]):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.09091em;margin-bottom:1.09091em;font-size:1.22222em;line-height:1.45455}.lg\:prose-lg :where(blockquote):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.66667em;margin-bottom:1.66667em;padding-inline-start:1em}.lg\:prose-lg :where(h1):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0;margin-bottom:.833333em;font-size:2.66667em;line-height:1}.lg\:prose-lg :where(h2):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.86667em;margin-bottom:1.06667em;font-size:1.66667em;line-height:1.33333}.lg\:prose-lg :where(h3):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.66667em;margin-bottom:.666667em;font-size:1.33333em;line-height:1.5}.lg\:prose-lg :where(h4):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.77778em;margin-bottom:.444444em;line-height:1.55556}.lg\:prose-lg :where(img):not(:where([class~=not-prose],[class~=not-prose] *)),.lg\:prose-lg :where(picture):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.77778em;margin-bottom:1.77778em}.lg\:prose-lg :where(picture>img):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0;margin-bottom:0}.lg\:prose-lg :where(video):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.77778em;margin-bottom:1.77778em}.lg\:prose-lg :where(kbd):not(:where([class~=not-prose],[class~=not-prose] *)){padding-top:.222222em;padding-inline-end:.444444em;padding-bottom:.222222em;border-radius:.3125rem;padding-inline-start:.444444em;font-size:.888889em}.lg\:prose-lg :where(code):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.888889em}.lg\:prose-lg :where(h2 code):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.866667em}.lg\:prose-lg :where(h3 code):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.875em}.lg\:prose-lg :where(pre):not(:where([class~=not-prose],[class~=not-prose] *)){padding-top:1em;padding-inline-end:1.5em;padding-bottom:1em;border-radius:.375rem;margin-top:2em;margin-bottom:2em;padding-inline-start:1.5em;font-size:.888889em;line-height:1.75}.lg\:prose-lg :where(ol):not(:where([class~=not-prose],[class~=not-prose] *)),.lg\:prose-lg :where(ul):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.33333em;margin-bottom:1.33333em;padding-inline-start:1.55556em}.lg\:prose-lg :where(li):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.666667em;margin-bottom:.666667em}.lg\:prose-lg :where(ol>li):not(:where([class~=not-prose],[class~=not-prose] *)),.lg\:prose-lg :where(ul>li):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:.444444em}.lg\:prose-lg :where(.lg\:prose-lg>ul>li p):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.888889em;margin-bottom:.888889em}.lg\:prose-lg :where(.lg\:prose-lg>ul>li>p:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.33333em}.lg\:prose-lg :where(.lg\:prose-lg>ul>li>p:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.33333em}.lg\:prose-lg :where(.lg\:prose-lg>ol>li>p:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.33333em}.lg\:prose-lg :where(.lg\:prose-lg>ol>li>p:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.33333em}.lg\:prose-lg :where(ul ul,ul ol,ol ul,ol ol):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.888889em;margin-bottom:.888889em}.lg\:prose-lg :where(dl):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.33333em;margin-bottom:1.33333em}.lg\:prose-lg :where(dt):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.33333em}.lg\:prose-lg :where(dd):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.666667em;padding-inline-start:1.55556em}.lg\:prose-lg :where(hr):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:3.11111em;margin-bottom:3.11111em}.lg\:prose-lg :where(hr+*):not(:where([class~=not-prose],[class~=not-prose] *)),.lg\:prose-lg :where(h2+*):not(:where([class~=not-prose],[class~=not-prose] *)),.lg\:prose-lg :where(h3+*):not(:where([class~=not-prose],[class~=not-prose] *)),.lg\:prose-lg :where(h4+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.lg\:prose-lg :where(table):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.888889em;line-height:1.5}.lg\:prose-lg :where(thead th):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-end:.75em;padding-bottom:.75em;padding-inline-start:.75em}.lg\:prose-lg :where(thead th:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:0}.lg\:prose-lg :where(thead th:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-end:0}.lg\:prose-lg :where(tbody td,tfoot td):not(:where([class~=not-prose],[class~=not-prose] *)){padding-top:.75em;padding-inline-end:.75em;padding-bottom:.75em;padding-inline-start:.75em}.lg\:prose-lg :where(tbody td:first-child,tfoot td:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:0}.lg\:prose-lg :where(tbody td:last-child,tfoot td:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-end:0}.lg\:prose-lg :where(figure):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.77778em;margin-bottom:1.77778em}.lg\:prose-lg :where(figure>*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0;margin-bottom:0}.lg\:prose-lg :where(figcaption):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1em;font-size:.888889em;line-height:1.5}.lg\:prose-lg :where(.lg\:prose-lg>:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.lg\:prose-lg :where(.lg\:prose-lg>:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:0}.lg\:flex{display:flex}.lg\:flex-col{flex-direction:column}.lg\:text-xs{font-size:var(--text-xs);line-height:var(--tw-leading,var(--text-xs--line-height))}}@media (min-width:80rem){.xl\:prose-xl{font-size:1.25rem;line-height:1.8}.xl\:prose-xl :where(p):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.2em;margin-bottom:1.2em}.xl\:prose-xl :where([class~=lead]):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1em;margin-bottom:1em;font-size:1.2em;line-height:1.5}.xl\:prose-xl :where(blockquote):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.6em;margin-bottom:1.6em;padding-inline-start:1.06667em}.xl\:prose-xl :where(h1):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0;margin-bottom:.857143em;font-size:2.8em;line-height:1}.xl\:prose-xl :where(h2):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.55556em;margin-bottom:.888889em;font-size:1.8em;line-height:1.11111}.xl\:prose-xl :where(h3):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.6em;margin-bottom:.666667em;font-size:1.5em;line-height:1.33333}.xl\:prose-xl :where(h4):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.8em;margin-bottom:.6em;line-height:1.6}.xl\:prose-xl :where(img):not(:where([class~=not-prose],[class~=not-prose] *)),.xl\:prose-xl :where(picture):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:2em;margin-bottom:2em}.xl\:prose-xl :where(picture>img):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0;margin-bottom:0}.xl\:prose-xl :where(video):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:2em;margin-bottom:2em}.xl\:prose-xl :where(kbd):not(:where([class~=not-prose],[class~=not-prose] *)){padding-top:.25em;padding-inline-end:.4em;padding-bottom:.25em;border-radius:.3125rem;padding-inline-start:.4em;font-size:.9em}.xl\:prose-xl :where(code):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.9em}.xl\:prose-xl :where(h2 code):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.861111em}.xl\:prose-xl :where(h3 code):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.9em}.xl\:prose-xl :where(pre):not(:where([class~=not-prose],[class~=not-prose] *)){padding-top:1.11111em;padding-inline-end:1.33333em;padding-bottom:1.11111em;border-radius:.5rem;margin-top:2em;margin-bottom:2em;padding-inline-start:1.33333em;font-size:.9em;line-height:1.77778}.xl\:prose-xl :where(ol):not(:where([class~=not-prose],[class~=not-prose] *)),.xl\:prose-xl :where(ul):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.2em;margin-bottom:1.2em;padding-inline-start:1.6em}.xl\:prose-xl :where(li):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.6em;margin-bottom:.6em}.xl\:prose-xl :where(ol>li):not(:where([class~=not-prose],[class~=not-prose] *)),.xl\:prose-xl :where(ul>li):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:.4em}.xl\:prose-xl :where(.xl\:prose-xl>ul>li p):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.8em;margin-bottom:.8em}.xl\:prose-xl :where(.xl\:prose-xl>ul>li>p:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.2em}.xl\:prose-xl :where(.xl\:prose-xl>ul>li>p:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.2em}.xl\:prose-xl :where(.xl\:prose-xl>ol>li>p:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.2em}.xl\:prose-xl :where(.xl\:prose-xl>ol>li>p:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.2em}.xl\:prose-xl :where(ul ul,ul ol,ol ul,ol ol):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.8em;margin-bottom:.8em}.xl\:prose-xl :where(dl):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.2em;margin-bottom:1.2em}.xl\:prose-xl :where(dt):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.2em}.xl\:prose-xl :where(dd):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.6em;padding-inline-start:1.6em}.xl\:prose-xl :where(hr):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:2.8em;margin-bottom:2.8em}.xl\:prose-xl :where(hr+*):not(:where([class~=not-prose],[class~=not-prose] *)),.xl\:prose-xl :where(h2+*):not(:where([class~=not-prose],[class~=not-prose] *)),.xl\:prose-xl :where(h3+*):not(:where([class~=not-prose],[class~=not-prose] *)),.xl\:prose-xl :where(h4+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.xl\:prose-xl :where(table):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.9em;line-height:1.55556}.xl\:prose-xl :where(thead th):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-end:.666667em;padding-bottom:.888889em;padding-inline-start:.666667em}.xl\:prose-xl :where(thead th:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:0}.xl\:prose-xl :where(thead th:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-end:0}.xl\:prose-xl :where(tbody td,tfoot td):not(:where([class~=not-prose],[class~=not-prose] *)){padding-top:.888889em;padding-inline-end:.666667em;padding-bottom:.888889em;padding-inline-start:.666667em}.xl\:prose-xl :where(tbody td:first-child,tfoot td:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:0}.xl\:prose-xl :where(tbody td:last-child,tfoot td:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-end:0}.xl\:prose-xl :where(figure):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:2em;margin-bottom:2em}.xl\:prose-xl :where(figure>*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0;margin-bottom:0}.xl\:prose-xl :where(figcaption):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1em;font-size:.9em;line-height:1.55556}.xl\:prose-xl :where(.xl\:prose-xl>:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.xl\:prose-xl :where(.xl\:prose-xl>:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:0}}@media (prefers-color-scheme:dark){.dark\:border-r-2{border-right-style:var(--tw-border-style);border-right-width:2px}.dark\:border-stone-700{border-color:var(--color-stone-700)}.dark\:bg-stone-800{background-color:var(--color-stone-800)}.dark\:bg-stone-900{background-color:var(--color-stone-900)}.dark\:text-stone-100{color:var(--color-stone-100)}.dark\:text-stone-300{color:var(--color-stone-300)}.dark\:text-stone-400{color:var(--color-stone-400)}.dark\:text-white{color:var(--color-white)}.dark\:prose-invert{--tw-prose-body:var(--tw-prose-invert-body);--tw-prose-headings:var(--tw-prose-invert-headings);--tw-prose-lead:var(--tw-prose-invert-lead);--tw-prose-links:var(--tw-prose-invert-links);--tw-prose-bold:var(--tw-prose-invert-bold);--tw-prose-counters:var(--tw-prose-invert-counters);--tw-prose-bullets:var(--tw-prose-invert-bullets);--tw-prose-hr:var(--tw-prose-invert-hr);--tw-prose-quotes:var(--tw-prose-invert-quotes);--tw-prose-quote-borders:var(--tw-prose-invert-quote-borders);--tw-prose-captions:var(--tw-prose-invert-captions);--tw-prose-kbd:var(--tw-prose-invert-kbd);--tw-prose-kbd-shadows:var(--tw-prose-invert-kbd-shadows);--tw-prose-code:var(--tw-prose-invert-code);--tw-prose-pre-code:var(--tw-prose-invert-pre-code);--tw-prose-pre-bg:var(--tw-prose-invert-pre-bg);--tw-prose-th-borders:var(--tw-prose-invert-th-borders);--tw-prose-td-borders:var(--tw-prose-invert-td-borders)}@media (hover:hover){.dark\:group-hover\:text-stone-300:is(:where(.group):hover *){color:var(--color-stone-300)}}.dark\:group-focus\:text-stone-300:is(:where(.group):focus *){color:var(--color-stone-300)}:is(.dark\:peer-checked\:\*\:bg-transparent\!:is(:where(.peer):checked~*)>*){background-color:#0000!important}:is(.dark\:peer-focus\:\*\:bg-white:is(:where(.peer):focus~*)>*){background-color:var(--color-white)}:is(.dark\:peer-checked\:\*\:before\:bg-white:is(:where(.peer):checked~*)>*):before,:is(.dark\:peer-focus\:\*\:before\:bg-white:is(:where(.peer):focus~*)>*):before,:is(.dark\:peer-checked\:\*\:after\:bg-white:is(:where(.peer):checked~*)>*):after,:is(.dark\:peer-focus\:\*\:after\:bg-white:is(:where(.peer):focus~*)>*):after{content:var(--tw-content);background-color:var(--color-white)}@media (hover:hover){.dark\:hover\:text-stone-100:hover{color:var(--color-stone-100)}.dark\:hover\:text-stone-300:hover{color:var(--color-stone-300)}.dark\:hover\:text-white:hover{color:var(--color-white)}}.dark\:focus\:text-white:focus{color:var(--color-white)}}@media print{.print\:prose-sm{font-size:.875rem;line-height:1.71429}.print\:prose-sm :where(p):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.14286em;margin-bottom:1.14286em}.print\:prose-sm :where([class~=lead]):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.888889em;margin-bottom:.888889em;font-size:1.28571em;line-height:1.55556}.print\:prose-sm :where(blockquote):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.33333em;margin-bottom:1.33333em;padding-inline-start:1.11111em}.print\:prose-sm :where(h1):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0;margin-bottom:.8em;font-size:2.14286em;line-height:1.2}.print\:prose-sm :where(h2):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.6em;margin-bottom:.8em;font-size:1.42857em;line-height:1.4}.print\:prose-sm :where(h3):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.55556em;margin-bottom:.444444em;font-size:1.28571em;line-height:1.55556}.print\:prose-sm :where(h4):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.42857em;margin-bottom:.571429em;line-height:1.42857}.print\:prose-sm :where(img):not(:where([class~=not-prose],[class~=not-prose] *)),.print\:prose-sm :where(picture):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.71429em;margin-bottom:1.71429em}.print\:prose-sm :where(picture>img):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0;margin-bottom:0}.print\:prose-sm :where(video):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.71429em;margin-bottom:1.71429em}.print\:prose-sm :where(kbd):not(:where([class~=not-prose],[class~=not-prose] *)){padding-top:.142857em;padding-inline-end:.357143em;padding-bottom:.142857em;border-radius:.3125rem;padding-inline-start:.357143em;font-size:.857143em}.print\:prose-sm :where(code):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.857143em}.print\:prose-sm :where(h2 code):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.9em}.print\:prose-sm :where(h3 code):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.888889em}.print\:prose-sm :where(pre):not(:where([class~=not-prose],[class~=not-prose] *)){padding-top:.666667em;padding-inline-end:1em;padding-bottom:.666667em;border-radius:.25rem;margin-top:1.66667em;margin-bottom:1.66667em;padding-inline-start:1em;font-size:.857143em;line-height:1.66667}.print\:prose-sm :where(ol):not(:where([class~=not-prose],[class~=not-prose] *)),.print\:prose-sm :where(ul):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.14286em;margin-bottom:1.14286em;padding-inline-start:1.57143em}.print\:prose-sm :where(li):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.285714em;margin-bottom:.285714em}.print\:prose-sm :where(ol>li):not(:where([class~=not-prose],[class~=not-prose] *)),.print\:prose-sm :where(ul>li):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:.428571em}.print\:prose-sm :where(.print\:prose-sm>ul>li p):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.571429em;margin-bottom:.571429em}.print\:prose-sm :where(.print\:prose-sm>ul>li>p:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.14286em}.print\:prose-sm :where(.print\:prose-sm>ul>li>p:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.14286em}.print\:prose-sm :where(.print\:prose-sm>ol>li>p:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.14286em}.print\:prose-sm :where(.print\:prose-sm>ol>li>p:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.14286em}.print\:prose-sm :where(ul ul,ul ol,ol ul,ol ol):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.571429em;margin-bottom:.571429em}.print\:prose-sm :where(dl):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.14286em;margin-bottom:1.14286em}.print\:prose-sm :where(dt):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.14286em}.print\:prose-sm :where(dd):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.285714em;padding-inline-start:1.57143em}.print\:prose-sm :where(hr):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:2.85714em;margin-bottom:2.85714em}.print\:prose-sm :where(hr+*):not(:where([class~=not-prose],[class~=not-prose] *)),.print\:prose-sm :where(h2+*):not(:where([class~=not-prose],[class~=not-prose] *)),.print\:prose-sm :where(h3+*):not(:where([class~=not-prose],[class~=not-prose] *)),.print\:prose-sm :where(h4+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.print\:prose-sm :where(table):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.857143em;line-height:1.5}.print\:prose-sm :where(thead th):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-end:1em;padding-bottom:.666667em;padding-inline-start:1em}.print\:prose-sm :where(thead th:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:0}.print\:prose-sm :where(thead th:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-end:0}.print\:prose-sm :where(tbody td,tfoot td):not(:where([class~=not-prose],[class~=not-prose] *)){padding-top:.666667em;padding-inline-end:1em;padding-bottom:.666667em;padding-inline-start:1em}.print\:prose-sm :where(tbody td:first-child,tfoot td:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:0}.print\:prose-sm :where(tbody td:last-child,tfoot td:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-end:0}.print\:prose-sm :where(figure):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.71429em;margin-bottom:1.71429em}.print\:prose-sm :where(figure>*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0;margin-bottom:0}.print\:prose-sm :where(figcaption):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.666667em;font-size:.857143em;line-height:1.33333}.print\:prose-sm :where(.print\:prose-sm>:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.print\:prose-sm :where(.print\:prose-sm>:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:0}.print\:hidden{display:none}.print\:max-w-none{max-width:none}.print\:px-0{padding-inline:calc(var(--spacing)*0)}.print\:\!py-0{padding-block:calc(var(--spacing)*0)!important}}.prose-code\:before\:content-none :where(code):not(:where([class~=not-prose],[class~=not-prose] *)):before,.prose-code\:after\:content-none :where(code):not(:where([class~=not-prose],[class~=not-prose] *)):after{content:var(--tw-content);--tw-content:none;content:none}}@property --tw-border-style{syntax:"*";inherits:false;initial-value:solid}@property --tw-leading{syntax:"*";inherits:false}@property --tw-translate-x{syntax:"*";inherits:false;initial-value:0}@property --tw-translate-y{syntax:"*";inherits:false;initial-value:0}@property --tw-translate-z{syntax:"*";inherits:false;initial-value:0}@property --tw-rotate-x{syntax:"*";inherits:false}@property --tw-rotate-y{syntax:"*";inherits:false}@property --tw-rotate-z{syntax:"*";inherits:false}@property --tw-skew-x{syntax:"*";inherits:false}@property --tw-skew-y{syntax:"*";inherits:false}@property --tw-space-y-reverse{syntax:"*";inherits:false;initial-value:0}@property --tw-font-weight{syntax:"*";inherits:false}@property --tw-tracking{syntax:"*";inherits:false}@property --tw-duration{syntax:"*";inherits:false}@property --tw-ease{syntax:"*";inherits:false}@property --tw-content{syntax:"*";inherits:false;initial-value:""}</style><link href="https://rsms.me/inter/inter.css" rel="stylesheet"><link href="/img/Icon.png?v=1754838931753" rel="icon" type="image/png"><meta name="darkreader-lock"><title>First Batcher - Learn MonoGame</title><meta content="The default MonoGame SpriteBatch is nice, but when you want to take full control over what gets passed to the GPU it’s a good idea to make your own." name="description"><meta content="First Batcher - Learn MonoGame" name="twitter:title"><meta content="The default MonoGame SpriteBatch is nice, but when you want to take full control over what gets passed to the GPU it’s a good idea to make your own." name="twitter:description"><meta content="First Batcher - Learn MonoGame" property="og:title"><meta content="The default MonoGame SpriteBatch is nice, but when you want to take full control over what gets passed to the GPU it’s a good idea to make your own." property="og:description"></head><body class="bg-stone-100 dark:bg-stone-900"><div class="md:hidden top-0 bg-stone-100 dark:bg-stone-900 h-16 print:hidden sticky w-full z-10"></div><div class="flex"><div class="flex-none fixed h-screen max-h-screen md:sticky overflow-x-hidden overflow-y-auto pointer-events-none print:hidden top-0 z-20"><div class="flex md:w-64 -ml-px h-full max-w-sm relative w-screen"><input aria-hidden="true" class="peer absolute opacity-0" id="menu_btn" type="checkbox"> <label class="duration-300 ease-out md:hidden bg-stone-600 fixed inset-0 opacity-0 peer-checked:opacity-75 peer-checked:pointer-events-auto pointer-events-none transition-opacity" for="menu_btn"></label> <label class="inline-block absolute cursor-pointer dark:peer-checked:*:after:bg-white dark:peer-checked:*:before:bg-white dark:peer-checked:*:bg-transparent! dark:peer-focus:*:after:bg-white dark:peer-focus:*:before:bg-white dark:peer-focus:*:bg-white duration-300 ease-out left-0 md:hidden menu-icon ml-0 peer-checked:*:after:bg-white peer-checked:*:after:rotate-45 peer-checked:*:after:top-0 peer-checked:*:before:-rotate-45 peer-checked:*:before:bg-white peer-checked:*:before:top-0 peer-checked:*:before:w-full peer-checked:*:bg-transparent! peer-checked:-ml-16 peer-checked:left-full peer-focus:*:after:bg-stone-900 peer-focus:*:before:bg-stone-900 peer-focus:*:bg-stone-900 pointer-events-auto px-6 py-8 select-none top-0 transition-left z-20" for="menu_btn"><span class="block after:-top-5px after:absolute after:bg-stone-500 after:block after:content-[''] after:duration-500 after:ease-out after:h-full after:transform after:transition-all after:w-full before:absolute before:bg-stone-500 before:block before:content-[''] before:duration-500 before:ease-out before:h-full before:top-5px before:transform before:transition-all before:w-1/2 bg-stone-500 duration-300 ease-out h-2px relative transition-colors w-5"></span></label><div class="flex flex-1 -translate-x-full bg-stone-50 border-r border-stone-200 dark:bg-stone-800 dark:border-r-2 dark:border-stone-700 duration-300 ease-out flex-col invisible max-w-xs md:flex-initial md:transition-none md:translate-x-0 md:visible md:w-64 peer-checked:translate-x-0 peer-checked:visible pointer-events-auto transform transition-transform-visibility w-full"><div class="flex items-center shrink-0 h-auto md:h-16 md:py-0 px-4 py-5"><a href="/" class="text-stone-900 dark:hover:text-white dark:text-stone-300 hover:text-stone-900 text-lg">Learn MonoGame</a></div><div class="overflow-y-auto flex-1 h-0 md:flex md:flex-col"><nav class="md:flex-1 md:py-4 px-2 space-y-1"><ul><li class="mt-1"><a href="/how-to/" class="py-2 hover:text-stone-900 dark:focus:text-white dark:hover:text-white dark:text-stone-300 flex focus:text-black font-medium group items-center leading-6 md:leading-5 md:text-sm px-2 text-base text-stone-600"><svg class="h-6 w-6 flex-none md:mr-3 mr-4 dark:group-focus:text-stone-300 dark:group-hover:text-stone-300 group-focus:text-stone-500 group-hover:text-stone-500 text-stone-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path d="M 9,12 a 3,3 0 1,1 6,0 a 3,3 0 1,1 -6,0" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/></svg> How-to guides</a><ul class="ml-4"><li class="mt-1"><a href="/how-to/get-started/" class="py-2 hover:text-stone-900 dark:focus:text-white dark:hover:text-white dark:text-stone-300 flex focus:text-black font-medium group items-center leading-6 md:leading-5 md:text-sm px-2 text-base text-stone-600"><svg class="h-6 w-6 flex-none md:mr-3 mr-4 dark:group-focus:text-stone-300 dark:group-hover:text-stone-300 group-focus:text-stone-500 group-hover:text-stone-500 text-stone-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/></svg> Get started</a></li><li class="mt-1"><a href="/how-to/develop-vscode/" class="py-2 hover:text-stone-900 dark:focus:text-white dark:hover:text-white dark:text-stone-300 flex focus:text-black font-medium group items-center leading-6 md:leading-5 md:text-sm px-2 text-base text-stone-600"><svg class="h-6 w-6 flex-none md:mr-3 mr-4 dark:group-focus:text-stone-300 dark:group-hover:text-stone-300 group-focus:text-stone-500 group-hover:text-stone-500 text-stone-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path d="M 9,12 a 3,3 0 1,1 6,0 a 3,3 0 1,1 -6,0" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/></svg> Developing with Visual Studio Code</a></li><li class="mt-1"><a href="/how-to/automate-release/" class="py-2 hover:text-stone-900 dark:focus:text-white dark:hover:text-white dark:text-stone-300 flex focus:text-black font-medium group items-center leading-6 md:leading-5 md:text-sm px-2 text-base text-stone-600"><svg class="h-6 w-6 flex-none md:mr-3 mr-4 dark:group-focus:text-stone-300 dark:group-hover:text-stone-300 group-focus:text-stone-500 group-hover:text-stone-500 text-stone-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path d="M 9,12 a 3,3 0 1,1 6,0 a 3,3 0 1,1 -6,0" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/></svg> Automate release</a></li><li class="mt-1"><a href="/how-to/install-develop/" class="py-2 hover:text-stone-900 dark:focus:text-white dark:hover:text-white dark:text-stone-300 flex focus:text-black font-medium group items-center leading-6 md:leading-5 md:text-sm px-2 text-base text-stone-600"><svg class="h-6 w-6 flex-none md:mr-3 mr-4 dark:group-focus:text-stone-300 dark:group-hover:text-stone-300 group-focus:text-stone-500 group-hover:text-stone-500 text-stone-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path d="M 9,12 a 3,3 0 1,1 6,0 a 3,3 0 1,1 -6,0" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/></svg> Install a development MonoGame build</a></li><li class="mt-1"><a href="/how-to/fullscreen/" class="py-2 hover:text-stone-900 dark:focus:text-white dark:hover:text-white dark:text-stone-300 flex focus:text-black font-medium group items-center leading-6 md:leading-5 md:text-sm px-2 text-base text-stone-600"><svg class="h-6 w-6 flex-none md:mr-3 mr-4 dark:group-focus:text-stone-300 dark:group-hover:text-stone-300 group-focus:text-stone-500 group-hover:text-stone-500 text-stone-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path d="M 9,12 a 3,3 0 1,1 6,0 a 3,3 0 1,1 -6,0" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/></svg> Fullscreen mode</a></li><li class="mt-1"><a href="/how-to/custom-icon/" class="py-2 hover:text-stone-900 dark:focus:text-white dark:hover:text-white dark:text-stone-300 flex focus:text-black font-medium group items-center leading-6 md:leading-5 md:text-sm px-2 text-base text-stone-600"><svg class="h-6 w-6 flex-none md:mr-3 mr-4 dark:group-focus:text-stone-300 dark:group-hover:text-stone-300 group-focus:text-stone-500 group-hover:text-stone-500 text-stone-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path d="M 9,12 a 3,3 0 1,1 6,0 a 3,3 0 1,1 -6,0" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/></svg> Customize the game icon</a></li></ul></li><li class="mt-1"><a href="/tutorial/" class="py-2 hover:text-stone-900 dark:focus:text-white dark:hover:text-white dark:text-stone-300 flex focus:text-black font-medium group items-center leading-6 md:leading-5 md:text-sm px-2 text-base text-stone-600"><svg class="h-6 w-6 flex-none md:mr-3 mr-4 dark:group-focus:text-stone-300 dark:group-hover:text-stone-300 group-focus:text-stone-500 group-hover:text-stone-500 text-stone-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path d="M 9,12 a 3,3 0 1,1 6,0 a 3,3 0 1,1 -6,0" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/></svg> Tutorials</a><ul class="ml-4"><li class="mt-1"><a href="/tutorial/first-shader/" class="py-2 hover:text-stone-900 dark:focus:text-white dark:hover:text-white dark:text-stone-300 flex focus:text-black font-medium group items-center leading-6 md:leading-5 md:text-sm px-2 text-base text-stone-600"><svg class="h-6 w-6 flex-none md:mr-3 mr-4 dark:group-focus:text-stone-300 dark:group-hover:text-stone-300 group-focus:text-stone-500 group-hover:text-stone-500 text-stone-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path d="M 9,12 a 3,3 0 1,1 6,0 a 3,3 0 1,1 -6,0" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/></svg> First shader</a></li><li class="mt-1"><a href="/tutorial/infinite-background-shader/" class="py-2 hover:text-stone-900 dark:focus:text-white dark:hover:text-white dark:text-stone-300 flex focus:text-black font-medium group items-center leading-6 md:leading-5 md:text-sm px-2 text-base text-stone-600"><svg class="h-6 w-6 flex-none md:mr-3 mr-4 dark:group-focus:text-stone-300 dark:group-hover:text-stone-300 group-focus:text-stone-500 group-hover:text-stone-500 text-stone-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path d="M 9,12 a 3,3 0 1,1 6,0 a 3,3 0 1,1 -6,0" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/></svg> Infinite background shader</a></li><li class="mt-1"><span class="py-2 px-2 flex font-medium group items-center leading-6 md:leading-5 md:text-sm text-base dark:text-white text-stone-900 underline"><svg class="h-6 w-6 flex-none md:mr-3 mr-4 dark:text-stone-300 text-stone-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path d="M 9,12 a 3,3 0 1,1 6,0 a 3,3 0 1,1 -6,0" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/></svg> First batcher</span></li><li class="mt-1"><a href="/tutorial/game-settings/" class="py-2 hover:text-stone-900 dark:focus:text-white dark:hover:text-white dark:text-stone-300 flex focus:text-black font-medium group items-center leading-6 md:leading-5 md:text-sm px-2 text-base text-stone-600"><svg class="h-6 w-6 flex-none md:mr-3 mr-4 dark:group-focus:text-stone-300 dark:group-hover:text-stone-300 group-focus:text-stone-500 group-hover:text-stone-500 text-stone-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path d="M 9,12 a 3,3 0 1,1 6,0 a 3,3 0 1,1 -6,0" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/></svg> Persistent game settings</a></li></ul></li><li class="mt-1"><a href="/external/" class="py-2 hover:text-stone-900 dark:focus:text-white dark:hover:text-white dark:text-stone-300 flex focus:text-black font-medium group items-center leading-6 md:leading-5 md:text-sm px-2 text-base text-stone-600"><svg class="h-6 w-6 flex-none md:mr-3 mr-4 dark:group-focus:text-stone-300 dark:group-hover:text-stone-300 group-focus:text-stone-500 group-hover:text-stone-500 text-stone-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path d="M 9,12 a 3,3 0 1,1 6,0 a 3,3 0 1,1 -6,0" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/></svg> External links</a></li></ul></nav></div><div class="flex items-center shrink-0 justify-center p-2"><ul class="flex"><li><a href="https://github.com/MonoGame/MonoGame" class="py-2 px-2 dark:hover:text-stone-300 hover:text-stone-500 inline-block text-stone-400" target="_blank"><span class="sr-only">GitHub</span> <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a></li><li><a href="https://discord.gg/monogame" class="py-2 px-2 dark:hover:text-stone-300 hover:text-stone-500 inline-block text-stone-400" target="_blank"><svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24"><path d="M20.222 0c1.406 0 2.54 1.137 2.607 2.475V24l-2.677-2.273-1.47-1.338-1.604-1.398.67 2.205H3.71c-1.402 0-2.54-1.065-2.54-2.476V2.48C1.17 1.142 2.31.003 3.715.003h16.5L20.222 0zm-6.118 5.683h-.03l-.202.2c2.073.6 3.076 1.537 3.076 1.537-1.336-.668-2.54-1.002-3.744-1.137-.87-.135-1.74-.064-2.475 0h-.2c-.47 0-1.47.2-2.81.735-.467.203-.735.336-.735.336s1.002-1.002 3.21-1.537l-.135-.135s-1.672-.064-3.477 1.27c0 0-1.805 3.144-1.805 7.02 0 0 1 1.74 3.743 1.806 0 0 .4-.533.805-1.002-1.54-.468-2.14-1.404-2.14-1.404s.134.066.335.2h.06c.03 0 .044.015.06.03v.006c.016.016.03.03.06.03.33.136.66.27.93.4.466.202 1.065.403 1.8.536.93.135 1.996.2 3.21 0 .6-.135 1.2-.267 1.8-.535.39-.2.87-.4 1.397-.737 0 0-.6.936-2.205 1.404.33.466.795 1 .795 1 2.744-.06 3.81-1.8 3.87-1.726 0-3.87-1.815-7.02-1.815-7.02-1.635-1.214-3.165-1.26-3.435-1.26l.056-.02zm.168 4.413c.703 0 1.27.6 1.27 1.335 0 .74-.57 1.34-1.27 1.34-.7 0-1.27-.6-1.27-1.334.002-.74.573-1.338 1.27-1.338zm-4.543 0c.7 0 1.266.6 1.266 1.335 0 .74-.57 1.34-1.27 1.34-.7 0-1.27-.6-1.27-1.334 0-.74.57-1.338 1.27-1.338z"/></svg></a></li><li><a href="https://community.monogame.net/" class="py-2 px-2 dark:hover:text-stone-300 hover:text-stone-500 inline-block text-stone-400" target="_blank"><span class="sr-only">Discourse</span> <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24"><path d="M12.103 0C18.666 0 24 5.485 24 11.997c0 6.51-5.33 11.99-11.9 11.99L0 24V11.79C0 5.28 5.532 0 12.103 0zm.116 4.563c-2.593-.003-4.996 1.352-6.337 3.57-1.33 2.208-1.387 4.957-.148 7.22L4.4 19.61l4.794-1.074c2.745 1.225 5.965.676 8.136-1.39 2.17-2.054 2.86-5.228 1.737-7.997-1.135-2.778-3.84-4.59-6.84-4.585h-.008z"/></svg></a></li><li><a href="https://www.reddit.com/r/monogame/" class="py-2 px-2 dark:hover:text-stone-300 hover:text-stone-500 inline-block text-stone-400" target="_blank"><span class="sr-only">Reddit</span> <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"/></svg></a></li></ul></div></div><div class="md:hidden shrink-0 w-14"></div></div></div><div class="flex flex-1 flex-row-reverse max-w-7xl mx-auto"><div class="bg-stone-100 dark:bg-stone-900 sticky top-0 h-screen hidden lg:flex lg:flex-col overflow-y-hidden pt-20 w-64"><h5 class="text-stone-900 dark:text-stone-100 font-semibold lg:text-xs mb-3 text-sm tracking-wide uppercase">On this page</h5><div class="overflow-y-auto overflow-x-hidden break-words font-medium text-sm"><nav><ol><li><a href="#project-setup" class="py-2 hover:text-stone-900 block dark:hover:text-stone-100 dark:text-stone-400 text-stone-500">Project setup</a><ol><li class="ml-4"><a href="#assets" class="py-2 hover:text-stone-900 block dark:hover:text-stone-100 dark:text-stone-400 text-stone-500">Assets</a><ol></ol></li><li class="ml-4"><a href="#content-pipeline" class="py-2 hover:text-stone-900 block dark:hover:text-stone-100 dark:text-stone-400 text-stone-500">Content pipeline</a><ol></ol></li><li class="ml-4"><a href="#source-code" class="py-2 hover:text-stone-900 block dark:hover:text-stone-100 dark:text-stone-400 text-stone-500">Source code</a><ol><li class="ml-4"><a href="#firstvertex.cs" class="py-2 hover:text-stone-900 block dark:hover:text-stone-100 dark:text-stone-400 text-stone-500">FirstVertex.cs</a><ol></ol></li><li class="ml-4"><a href="#game1.cs" class="py-2 hover:text-stone-900 block dark:hover:text-stone-100 dark:text-stone-400 text-stone-500">Game1.cs</a><ol></ol></li></ol></li></ol></li><li><a href="#explanation" class="py-2 hover:text-stone-900 block dark:hover:text-stone-100 dark:text-stone-400 text-stone-500">Explanation</a><ol></ol></li><li><a href="#read-more" class="py-2 hover:text-stone-900 block dark:hover:text-stone-100 dark:text-stone-400 text-stone-500">Read more</a><ol></ol></li></ol></nav></div></div><div class="flex flex-1 justify-center"><main class="px-4 break-anywhere dark:prose-invert focus:outline-none grow lg:prose-lg md:px-8 md:py-12 print:!py-0 print:max-w-none print:prose-sm print:px-0 prose prose-code:after:content-none prose-code:before:content-none prose-stone py-0 sm:px-6 xl:prose-xl" tabindex="0"><h1 id="first-batcher">First Batcher</h1><p>The default MonoGame SpriteBatch is nice, but when you want to take full control over what gets passed to the GPU it’s a good idea to make your own.</p><p>This tutorial builds on top of <a href="/how-to/get-started/">Get started</a> and <a href="/tutorial/first-shader/">First shader</a>.</p><p>The first part of this tutorial will walk you through the project setup without explaining much. Once the project is setup and you can run it, you’ll be walked through it line by line to understand how everything works under the hood.</p><h2 id="project-setup">Project setup</h2><p>The completed project can be found <a href="https://github.com/learn-monogame/first-batcher" target="_blank" rel="noopener noreferrer">here</a>.</p><h3 id="assets">Assets</h3><p>Add the following image to the <code>Content</code> folder and call it <code>background.png</code>:</p><p><img alt="The background image" src="/tutorial/first-batcher/image.png"></p><p>Next to it, create a text file called <code>first-shader.fx</code>. Add the following text to it:</p><div class="code-select"><div class="code-highlight" lang="hlsl"><pre class="syntax"><code><span class="line-numbers" aria-hidden="true" style="counter-reset: linenumber 0"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token keyword directive">if</span> <span class="token expression">OPENGL</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token keyword directive">define</span> <span class="token macro-name">VS_SHADERMODEL</span> <span class="token expression">vs_3_0</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token keyword directive">define</span> <span class="token macro-name">PS_SHADERMODEL</span> <span class="token expression">ps_3_0</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token keyword directive">else</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token keyword directive">define</span> <span class="token macro-name">VS_SHADERMODEL</span> <span class="token expression">vs_4_0</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token keyword directive">define</span> <span class="token macro-name">PS_SHADERMODEL</span> <span class="token expression">ps_4_0</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token keyword directive">endif</span></span>

<span class="token keyword keyword-float4x4">float4x4</span> view_projection<span class="token punctuation">;</span>
<span class="token keyword keyword-sampler">sampler</span> TextureSampler <span class="token operator">:</span> <span class="token keyword keyword-register">register</span><span class="token punctuation">(</span>s0<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword keyword-struct">struct</span> <span class="token class-name">VertexInput</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-float4">float4</span> Position <span class="token operator">:</span> POSITION0<span class="token punctuation">;</span>
    <span class="token keyword keyword-float4">float4</span> TexCoord <span class="token operator">:</span> TEXCOORD0<span class="token punctuation">;</span>
    <span class="token keyword keyword-float4">float4</span> Color <span class="token operator">:</span> COLOR0<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword keyword-struct">struct</span> <span class="token class-name">PixelInput</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-float4">float4</span> Position <span class="token operator">:</span> SV_Position0<span class="token punctuation">;</span>
    <span class="token keyword keyword-float4">float4</span> TexCoord <span class="token operator">:</span> TEXCOORD0<span class="token punctuation">;</span>
    <span class="token keyword keyword-float4">float4</span> Color <span class="token operator">:</span> COLOR0<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

PixelInput <span class="token function">SpriteVertexShader</span><span class="token punctuation">(</span>VertexInput v<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    PixelInput output<span class="token punctuation">;</span>

    output<span class="token punctuation">.</span>Position <span class="token operator">=</span> <span class="token function">mul</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span>Position<span class="token punctuation">,</span> view_projection<span class="token punctuation">)</span><span class="token punctuation">;</span>
    output<span class="token punctuation">.</span>TexCoord <span class="token operator">=</span> v<span class="token punctuation">.</span>TexCoord<span class="token punctuation">;</span>
    output<span class="token punctuation">.</span>Color <span class="token operator">=</span> v<span class="token punctuation">.</span>Color<span class="token punctuation">;</span>

    <span class="token keyword keyword-return">return</span> output<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword keyword-float4">float4</span> <span class="token function">SpritePixelShader</span><span class="token punctuation">(</span>PixelInput p<span class="token punctuation">)</span> <span class="token operator">:</span> SV_TARGET <span class="token punctuation">{</span>
    <span class="token keyword keyword-float4">float4</span> diffuse <span class="token operator">=</span> <span class="token function">tex2D</span><span class="token punctuation">(</span>TextureSampler<span class="token punctuation">,</span> p<span class="token punctuation">.</span>TexCoord<span class="token punctuation">.</span>xy<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-return">return</span> diffuse <span class="token operator">*</span> p<span class="token punctuation">.</span>Color<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword keyword-technique">technique</span> SpriteBatch <span class="token punctuation">{</span>
    <span class="token keyword keyword-pass">pass</span> <span class="token punctuation">{</span>
        <span class="token class-name">VertexShader</span> <span class="token operator">=</span> <span class="token keyword keyword-compile">compile</span> VS_SHADERMODEL <span class="token function">SpriteVertexShader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">PixelShader</span> <span class="token operator">=</span> <span class="token keyword keyword-compile">compile</span> PS_SHADERMODEL <span class="token function">SpritePixelShader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div></div><h3 id="content-pipeline">Content pipeline</h3><p>Open <code>Content.mgcb</code> using the MonoGame Content Builder Editor interface. (Read <a href="/how-to/get-started/">Get started</a> to learn how to get it.) Add both to the content pipeline editor as an existing item:</p><p><img alt="Use existing item to add them to the MonoGame pipeline." src="/tutorial/first-batcher/add-existing-item.png"></p><p>If you open <code>Content.mgcb</code> as a text file, this is the content you will see:</p><div class="code-select"><div class="code-highlight"><pre class="syntax"><code><span class="line-numbers" aria-hidden="true" style="counter-reset: linenumber 0"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span>#----------------------------- Global Properties ----------------------------#

/outputDir:bin/$(Platform)
/intermediateDir:obj/$(Platform)
/platform:DesktopGL
/config:
/profile:Reach
/compress:True

#-------------------------------- References --------------------------------#


#---------------------------------- Content ---------------------------------#

#begin first-shader.fx
/importer:EffectImporter
/processor:EffectProcessor
/processorParam:DebugMode=Auto
/build:first-shader.fx

#begin image.png
/importer:TextureImporter
/processor:TextureProcessor
/processorParam:ColorKeyColor=255,0,255,255
/processorParam:ColorKeyEnabled=True
/processorParam:GenerateMipmaps=False
/processorParam:PremultiplyAlpha=True
/processorParam:ResizeToPowerOfTwo=False
/processorParam:MakeSquare=False
/processorParam:TextureFormat=Color
/build:image.png
</code></pre></div></div><h3 id="source-code">Source code</h3><h4 id="firstvertex.cs">FirstVertex.cs</h4><p>Create a <code>FirstVertex.cs</code> file. Paste this content in:</p><div class="code-select"><div class="code-highlight" lang="csharp"><pre class="syntax"><code><span class="line-numbers" aria-hidden="true" style="counter-reset: linenumber 0"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span class="token keyword keyword-using">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Runtime<span class="token punctuation">.</span>InteropServices</span><span class="token punctuation">;</span>
<span class="token keyword keyword-using">using</span> <span class="token namespace">Microsoft<span class="token punctuation">.</span>Xna<span class="token punctuation">.</span>Framework</span><span class="token punctuation">;</span>
<span class="token keyword keyword-using">using</span> <span class="token namespace">Microsoft<span class="token punctuation">.</span>Xna<span class="token punctuation">.</span>Framework<span class="token punctuation">.</span>Graphics</span><span class="token punctuation">;</span>

<span class="token keyword keyword-namespace">namespace</span> <span class="token namespace">GameProject</span><span class="token punctuation">;</span>

<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">StructLayout</span><span class="token attribute-arguments"><span class="token punctuation">(</span>LayoutKind<span class="token punctuation">.</span>Sequential<span class="token punctuation">,</span> Pack <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword keyword-public">public</span> <span class="token keyword keyword-struct">struct</span> <span class="token class-name">FirstVertex</span><span class="token punctuation">(</span><span class="token class-name">Vector3</span> position<span class="token punctuation">,</span> <span class="token class-name">Vector2</span> textureCoordinate<span class="token punctuation">,</span> <span class="token class-name">Color</span> color<span class="token punctuation">)</span> <span class="token punctuation">:</span> IVertexType <span class="token punctuation">{</span>
    <span class="token keyword keyword-public">public</span> <span class="token class-name">Vector3</span> Position <span class="token operator">=</span> position<span class="token punctuation">;</span>
    <span class="token keyword keyword-public">public</span> <span class="token class-name">Vector2</span> TextureCoordinate <span class="token operator">=</span> textureCoordinate<span class="token punctuation">;</span>
    <span class="token keyword keyword-public">public</span> <span class="token class-name">Color</span> Color <span class="token operator">=</span> color<span class="token punctuation">;</span>
    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-readonly">readonly</span> <span class="token class-name">VertexDeclaration</span> VertexDeclaration<span class="token punctuation">;</span>

    <span class="token class-name return-type">VertexDeclaration</span> IVertexType<span class="token punctuation">.</span>VertexDeclaration <span class="token operator">=></span> VertexDeclaration<span class="token punctuation">;</span>

    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-override">override</span> <span class="token keyword keyword-readonly">readonly</span> <span class="token class-name return-type"><span class="token keyword keyword-int">int</span></span> <span class="token function">GetHashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword keyword-return">return</span> System<span class="token punctuation">.</span>HashCode<span class="token punctuation">.</span><span class="token function">Combine</span><span class="token punctuation">(</span>Position<span class="token punctuation">,</span> TextureCoordinate<span class="token punctuation">,</span> Color<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-override">override</span> <span class="token keyword keyword-readonly">readonly</span> <span class="token class-name return-type"><span class="token keyword keyword-string">string</span></span> <span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword keyword-return">return</span>
            <span class="token string">"{{Position:"</span> <span class="token operator">+</span> Position <span class="token operator">+</span>
            <span class="token string">" TextureCoordinate:"</span> <span class="token operator">+</span> TextureCoordinate <span class="token operator">+</span>
            <span class="token string">" Color:"</span> <span class="token operator">+</span> Color <span class="token operator">+</span>
            <span class="token string">"}}"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-bool">bool</span> <span class="token keyword keyword-operator">operator</span> <span class="token operator">==</span><span class="token punctuation">(</span><span class="token class-name">FirstVertex</span> left<span class="token punctuation">,</span> <span class="token class-name">FirstVertex</span> right<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword keyword-return">return</span>
            left<span class="token punctuation">.</span>Position <span class="token operator">==</span> right<span class="token punctuation">.</span>Position <span class="token operator">&&</span>
            left<span class="token punctuation">.</span>TextureCoordinate <span class="token operator">==</span> right<span class="token punctuation">.</span>TextureCoordinate <span class="token operator">&&</span>
            left<span class="token punctuation">.</span>Color <span class="token operator">==</span> right<span class="token punctuation">.</span>Color<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-bool">bool</span> <span class="token keyword keyword-operator">operator</span> <span class="token operator">!=</span><span class="token punctuation">(</span><span class="token class-name">FirstVertex</span> left<span class="token punctuation">,</span> <span class="token class-name">FirstVertex</span> right<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword keyword-return">return</span> <span class="token operator">!</span><span class="token punctuation">(</span>left <span class="token operator">==</span> right<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-public">public</span> <span class="token keyword keyword-override">override</span> <span class="token keyword keyword-readonly">readonly</span> <span class="token class-name return-type"><span class="token keyword keyword-bool">bool</span></span> <span class="token function">Equals</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword keyword-object">object</span><span class="token punctuation">?</span></span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>obj <span class="token operator">==</span> <span class="token keyword keyword-null">null</span><span class="token punctuation">)</span>
            <span class="token keyword keyword-return">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

        <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">GetType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword keyword-base">base</span><span class="token punctuation">.</span><span class="token function">GetType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword keyword-return">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

        <span class="token keyword keyword-return">return</span> <span class="token keyword keyword-this">this</span> <span class="token operator">==</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>FirstVertex<span class="token punctuation">)</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-static">static</span> <span class="token function">FirstVertex</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword keyword-int">int</span></span> offset <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword keyword-var">var</span></span> elements <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name constructor-invocation">VertexElement<span class="token punctuation">[</span><span class="token punctuation">]</span></span> <span class="token punctuation">{</span>
            <span class="token function">GetVertexElement</span><span class="token punctuation">(</span><span class="token keyword keyword-ref">ref</span> offset<span class="token punctuation">,</span> VertexElementFormat<span class="token punctuation">.</span>Vector3<span class="token punctuation">,</span> VertexElementUsage<span class="token punctuation">.</span>Position<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token function">GetVertexElement</span><span class="token punctuation">(</span><span class="token keyword keyword-ref">ref</span> offset<span class="token punctuation">,</span> VertexElementFormat<span class="token punctuation">.</span>Vector2<span class="token punctuation">,</span> VertexElementUsage<span class="token punctuation">.</span>TextureCoordinate<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token function">GetVertexElement</span><span class="token punctuation">(</span><span class="token keyword keyword-ref">ref</span> offset<span class="token punctuation">,</span> VertexElementFormat<span class="token punctuation">.</span>Color<span class="token punctuation">,</span> VertexElementUsage<span class="token punctuation">.</span>Color<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        VertexDeclaration <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name constructor-invocation">VertexDeclaration</span><span class="token punctuation">(</span>elements<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword keyword-private">private</span> <span class="token keyword keyword-static">static</span> <span class="token class-name return-type">VertexElement</span> <span class="token function">GetVertexElement</span><span class="token punctuation">(</span><span class="token keyword keyword-ref">ref</span> <span class="token class-name"><span class="token keyword keyword-int">int</span></span> offset<span class="token punctuation">,</span> <span class="token class-name">VertexElementFormat</span> f<span class="token punctuation">,</span> <span class="token class-name">VertexElementUsage</span> u<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword keyword-int">int</span></span> usageIndex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword keyword-return">return</span> <span class="token keyword keyword-new">new</span><span class="token punctuation">(</span><span class="token function">OffsetInline</span><span class="token punctuation">(</span><span class="token keyword keyword-ref">ref</span> offset<span class="token punctuation">,</span> Offsets<span class="token punctuation">[</span>f<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> f<span class="token punctuation">,</span> u<span class="token punctuation">,</span> usageIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword keyword-private">private</span> <span class="token keyword keyword-static">static</span> <span class="token class-name return-type"><span class="token keyword keyword-int">int</span></span> <span class="token function">OffsetInline</span><span class="token punctuation">(</span><span class="token keyword keyword-ref">ref</span> <span class="token class-name"><span class="token keyword keyword-int">int</span></span> <span class="token keyword keyword-value">value</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword keyword-int">int</span></span> offset<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword keyword-int">int</span></span> old <span class="token operator">=</span> <span class="token keyword keyword-value">value</span><span class="token punctuation">;</span>
        <span class="token keyword keyword-value">value</span> <span class="token operator">+=</span> offset<span class="token punctuation">;</span>
        <span class="token keyword keyword-return">return</span> old<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword keyword-private">private</span> <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-readonly">readonly</span> <span class="token class-name">Dictionary<span class="token punctuation">&lt;</span>VertexElementFormat<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span><span class="token punctuation">></span></span> Offsets <span class="token operator">=</span> <span class="token keyword keyword-new">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">VertexElementFormat<span class="token punctuation">.</span>Single</span></span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">VertexElementFormat<span class="token punctuation">.</span>Vector2</span></span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">VertexElementFormat<span class="token punctuation">.</span>Vector3</span></span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">VertexElementFormat<span class="token punctuation">.</span>Vector4</span></span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">16</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">VertexElementFormat<span class="token punctuation">.</span>Color</span></span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">VertexElementFormat<span class="token punctuation">.</span>Byte4</span></span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">VertexElementFormat<span class="token punctuation">.</span>Short2</span></span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">VertexElementFormat<span class="token punctuation">.</span>Short4</span></span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">VertexElementFormat<span class="token punctuation">.</span>NormalizedShort2</span></span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">VertexElementFormat<span class="token punctuation">.</span>NormalizedShort4</span></span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">VertexElementFormat<span class="token punctuation">.</span>HalfVector2</span></span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">VertexElementFormat<span class="token punctuation">.</span>HalfVector4</span></span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div></div><h4 id="game1.cs">Game1.cs</h4><div class="code-select"><div class="code-highlight" lang="csharp"><pre class="syntax"><code><span class="line-numbers" aria-hidden="true" style="counter-reset: linenumber 0"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span class="token keyword keyword-using">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span>
<span class="token keyword keyword-using">using</span> <span class="token namespace">Microsoft<span class="token punctuation">.</span>Xna<span class="token punctuation">.</span>Framework</span><span class="token punctuation">;</span>
<span class="token keyword keyword-using">using</span> <span class="token namespace">Microsoft<span class="token punctuation">.</span>Xna<span class="token punctuation">.</span>Framework<span class="token punctuation">.</span>Graphics</span><span class="token punctuation">;</span>
<span class="token keyword keyword-using">using</span> <span class="token namespace">Microsoft<span class="token punctuation">.</span>Xna<span class="token punctuation">.</span>Framework<span class="token punctuation">.</span>Input</span><span class="token punctuation">;</span>

<span class="token keyword keyword-namespace">namespace</span> <span class="token namespace">GameProject</span><span class="token punctuation">;</span>

<span class="token keyword keyword-public">public</span> <span class="token keyword keyword-class">class</span> <span class="token class-name">Game1</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Game</span></span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-public">public</span> <span class="token function">Game1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        _graphics <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name constructor-invocation">GraphicsDeviceManager</span><span class="token punctuation">(</span><span class="token keyword keyword-this">this</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            GraphicsProfile <span class="token operator">=</span> GraphicsProfile<span class="token punctuation">.</span>HiDef
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        Content<span class="token punctuation">.</span>RootDirectory <span class="token operator">=</span> <span class="token string">"Content"</span><span class="token punctuation">;</span>
        IsMouseVisible <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-protected">protected</span> <span class="token keyword keyword-override">override</span> <span class="token class-name return-type"><span class="token keyword keyword-void">void</span></span> <span class="token function">Initialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// TODO: Add your initialization logic here</span>

        <span class="token keyword keyword-base">base</span><span class="token punctuation">.</span><span class="token function">Initialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-protected">protected</span> <span class="token keyword keyword-override">override</span> <span class="token class-name return-type"><span class="token keyword keyword-void">void</span></span> <span class="token function">LoadContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        _image <span class="token operator">=</span> Content<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Load</span><span class="token class-name generic"><span class="token punctuation">&lt;</span>Texture2D<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token string">"image"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        _firstShader <span class="token operator">=</span> Content<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Load</span><span class="token class-name generic"><span class="token punctuation">&lt;</span>Effect<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token string">"first-shader"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        _vertices <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name constructor-invocation">FirstVertex</span><span class="token punctuation">[</span>_initialVertices<span class="token punctuation">]</span><span class="token punctuation">;</span>
        _indices <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name constructor-invocation"><span class="token keyword keyword-uint">uint</span></span><span class="token punctuation">[</span>_initialIndices<span class="token punctuation">]</span><span class="token punctuation">;</span>

        <span class="token function">GenerateIndexArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        _vertexBuffer <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name constructor-invocation">DynamicVertexBuffer</span><span class="token punctuation">(</span>GraphicsDevice<span class="token punctuation">,</span> <span class="token keyword keyword-typeof">typeof</span><span class="token punctuation">(</span><span class="token class-name type-expression">FirstVertex</span><span class="token punctuation">)</span><span class="token punctuation">,</span> _vertices<span class="token punctuation">.</span>Length<span class="token punctuation">,</span> BufferUsage<span class="token punctuation">.</span>WriteOnly<span class="token punctuation">)</span><span class="token punctuation">;</span>

        _indexBuffer <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name constructor-invocation">IndexBuffer</span><span class="token punctuation">(</span>GraphicsDevice<span class="token punctuation">,</span> <span class="token keyword keyword-typeof">typeof</span><span class="token punctuation">(</span><span class="token class-name type-expression"><span class="token keyword keyword-uint">uint</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span> _indices<span class="token punctuation">.</span>Length<span class="token punctuation">,</span> BufferUsage<span class="token punctuation">.</span>WriteOnly<span class="token punctuation">)</span><span class="token punctuation">;</span>
        _indexBuffer<span class="token punctuation">.</span><span class="token function">SetData</span><span class="token punctuation">(</span>_indices<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-protected">protected</span> <span class="token keyword keyword-override">override</span> <span class="token class-name return-type"><span class="token keyword keyword-void">void</span></span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token class-name">GameTime</span> gameTime<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>GamePad<span class="token punctuation">.</span><span class="token function">GetState</span><span class="token punctuation">(</span>PlayerIndex<span class="token punctuation">.</span>One<span class="token punctuation">)</span><span class="token punctuation">.</span>Buttons<span class="token punctuation">.</span>Back <span class="token operator">==</span> ButtonState<span class="token punctuation">.</span>Pressed <span class="token operator">||</span> Keyboard<span class="token punctuation">.</span><span class="token function">GetState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">IsKeyDown</span><span class="token punctuation">(</span>Keys<span class="token punctuation">.</span>Escape<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token function">Exit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword keyword-base">base</span><span class="token punctuation">.</span><span class="token function">Update</span><span class="token punctuation">(</span>gameTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-protected">protected</span> <span class="token keyword keyword-override">override</span> <span class="token class-name return-type"><span class="token keyword keyword-void">void</span></span> <span class="token function">Draw</span><span class="token punctuation">(</span><span class="token class-name">GameTime</span> gameTime<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        GraphicsDevice<span class="token punctuation">.</span><span class="token function">Clear</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>CornflowerBlue<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token function">Begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">Draw</span><span class="token punctuation">(</span><span class="token keyword keyword-new">new</span> <span class="token class-name constructor-invocation">Vector2</span><span class="token punctuation">(</span><span class="token number">100f</span><span class="token punctuation">,</span> <span class="token number">100f</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">Draw</span><span class="token punctuation">(</span><span class="token keyword keyword-new">new</span> <span class="token class-name constructor-invocation">Vector2</span><span class="token punctuation">(</span><span class="token number">200f</span><span class="token punctuation">,</span> <span class="token number">300f</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">End</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword keyword-base">base</span><span class="token punctuation">.</span><span class="token function">Draw</span><span class="token punctuation">(</span>gameTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-public">public</span> <span class="token class-name return-type"><span class="token keyword keyword-void">void</span></span> <span class="token function">Begin</span><span class="token punctuation">(</span><span class="token class-name">Texture2D<span class="token punctuation">?</span></span> texture <span class="token operator">=</span> <span class="token keyword keyword-null">null</span><span class="token punctuation">,</span> <span class="token class-name">Matrix<span class="token punctuation">?</span></span> view <span class="token operator">=</span> <span class="token keyword keyword-null">null</span><span class="token punctuation">,</span> <span class="token class-name">Matrix<span class="token punctuation">?</span></span> projection <span class="token operator">=</span> <span class="token keyword keyword-null">null</span><span class="token punctuation">,</span> <span class="token class-name">SamplerState<span class="token punctuation">?</span></span> sampler <span class="token operator">=</span> <span class="token keyword keyword-null">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Viewport</span> viewport <span class="token operator">=</span> GraphicsDevice<span class="token punctuation">.</span>Viewport<span class="token punctuation">;</span>

        _texture <span class="token operator">=</span> texture <span class="token operator">??</span> _image<span class="token punctuation">;</span>
        _view <span class="token operator">=</span> view <span class="token operator">??</span> Matrix<span class="token punctuation">.</span>Identity<span class="token punctuation">;</span>
        _projection <span class="token operator">=</span> projection <span class="token operator">??</span> Matrix<span class="token punctuation">.</span><span class="token function">CreateOrthographicOffCenter</span><span class="token punctuation">(</span>viewport<span class="token punctuation">.</span>X<span class="token punctuation">,</span> viewport<span class="token punctuation">.</span>Width<span class="token punctuation">,</span> viewport<span class="token punctuation">.</span>Height<span class="token punctuation">,</span> viewport<span class="token punctuation">.</span>Y<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        _sampler <span class="token operator">=</span> sampler <span class="token operator">??</span> SamplerState<span class="token punctuation">.</span>LinearClamp<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-public">public</span> <span class="token class-name return-type"><span class="token keyword keyword-void">void</span></span> <span class="token function">Draw</span><span class="token punctuation">(</span><span class="token class-name">Vector2</span> xy<span class="token punctuation">,</span> <span class="token class-name">Color<span class="token punctuation">?</span></span> color <span class="token operator">=</span> <span class="token keyword keyword-null">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">EnsureSizeOrDouble</span><span class="token punctuation">(</span><span class="token keyword keyword-ref">ref</span> _vertices<span class="token punctuation">,</span> _vertexCount <span class="token operator">+</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        _indicesChanged <span class="token operator">=</span> <span class="token function">EnsureSizeOrDouble</span><span class="token punctuation">(</span><span class="token keyword keyword-ref">ref</span> _indices<span class="token punctuation">,</span> _indexCount <span class="token operator">+</span> <span class="token number">6</span><span class="token punctuation">)</span> <span class="token operator">||</span> _indicesChanged<span class="token punctuation">;</span>

        <span class="token class-name">Vector2</span> topLeft <span class="token operator">=</span> xy <span class="token operator">+</span> <span class="token keyword keyword-new">new</span> <span class="token class-name constructor-invocation">Vector2</span><span class="token punctuation">(</span><span class="token number">0f</span><span class="token punctuation">,</span> <span class="token number">0f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Vector2</span> topRight <span class="token operator">=</span> xy <span class="token operator">+</span> <span class="token keyword keyword-new">new</span> <span class="token class-name constructor-invocation">Vector2</span><span class="token punctuation">(</span>_texture<span class="token punctuation">.</span>Width<span class="token punctuation">,</span> <span class="token number">0f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Vector2</span> bottomRight <span class="token operator">=</span> xy <span class="token operator">+</span> <span class="token keyword keyword-new">new</span> <span class="token class-name constructor-invocation">Vector2</span><span class="token punctuation">(</span>_texture<span class="token punctuation">.</span>Width<span class="token punctuation">,</span> _texture<span class="token punctuation">.</span>Height<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Vector2</span> bottomLeft <span class="token operator">=</span> xy <span class="token operator">+</span> <span class="token keyword keyword-new">new</span> <span class="token class-name constructor-invocation">Vector2</span><span class="token punctuation">(</span><span class="token number">0f</span><span class="token punctuation">,</span> _texture<span class="token punctuation">.</span>Height<span class="token punctuation">)</span><span class="token punctuation">;</span>

        color <span class="token operator">??=</span> Color<span class="token punctuation">.</span>White<span class="token punctuation">;</span>

        _vertices<span class="token punctuation">[</span>_vertexCount <span class="token operator">+</span> <span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name constructor-invocation">FirstVertex</span><span class="token punctuation">(</span>
            <span class="token keyword keyword-new">new</span> <span class="token class-name constructor-invocation">Vector3</span><span class="token punctuation">(</span>topLeft<span class="token punctuation">,</span> <span class="token number">0f</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token keyword keyword-new">new</span> <span class="token class-name constructor-invocation">Vector2</span><span class="token punctuation">(</span><span class="token number">0f</span><span class="token punctuation">,</span> <span class="token number">0f</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            color<span class="token punctuation">.</span>Value
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        _vertices<span class="token punctuation">[</span>_vertexCount <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name constructor-invocation">FirstVertex</span><span class="token punctuation">(</span>
            <span class="token keyword keyword-new">new</span> <span class="token class-name constructor-invocation">Vector3</span><span class="token punctuation">(</span>topRight<span class="token punctuation">,</span> <span class="token number">0f</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token keyword keyword-new">new</span> <span class="token class-name constructor-invocation">Vector2</span><span class="token punctuation">(</span><span class="token number">1f</span><span class="token punctuation">,</span> <span class="token number">0f</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            color<span class="token punctuation">.</span>Value
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        _vertices<span class="token punctuation">[</span>_vertexCount <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name constructor-invocation">FirstVertex</span><span class="token punctuation">(</span>
            <span class="token keyword keyword-new">new</span> <span class="token class-name constructor-invocation">Vector3</span><span class="token punctuation">(</span>bottomRight<span class="token punctuation">,</span> <span class="token number">0f</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token keyword keyword-new">new</span> <span class="token class-name constructor-invocation">Vector2</span><span class="token punctuation">(</span><span class="token number">1f</span><span class="token punctuation">,</span> <span class="token number">1f</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            color<span class="token punctuation">.</span>Value
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        _vertices<span class="token punctuation">[</span>_vertexCount <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name constructor-invocation">FirstVertex</span><span class="token punctuation">(</span>
            <span class="token keyword keyword-new">new</span> <span class="token class-name constructor-invocation">Vector3</span><span class="token punctuation">(</span>bottomLeft<span class="token punctuation">,</span> <span class="token number">0f</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token keyword keyword-new">new</span> <span class="token class-name constructor-invocation">Vector2</span><span class="token punctuation">(</span><span class="token number">0f</span><span class="token punctuation">,</span> <span class="token number">1f</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            color<span class="token punctuation">.</span>Value
        <span class="token punctuation">)</span><span class="token punctuation">;</span>

        _triangleCount <span class="token operator">+=</span> <span class="token number">2</span><span class="token punctuation">;</span>
        _vertexCount <span class="token operator">+=</span> <span class="token number">4</span><span class="token punctuation">;</span>
        _indexCount <span class="token operator">+=</span> <span class="token number">6</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-public">public</span> <span class="token class-name return-type"><span class="token keyword keyword-void">void</span></span> <span class="token function">End</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>_triangleCount <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword keyword-return">return</span><span class="token punctuation">;</span>

        <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>_indicesChanged<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            _vertexBuffer<span class="token punctuation">.</span><span class="token function">Dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            _indexBuffer<span class="token punctuation">.</span><span class="token function">Dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            _vertexBuffer <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name constructor-invocation">DynamicVertexBuffer</span><span class="token punctuation">(</span>GraphicsDevice<span class="token punctuation">,</span> <span class="token keyword keyword-typeof">typeof</span><span class="token punctuation">(</span><span class="token class-name type-expression">FirstVertex</span><span class="token punctuation">)</span><span class="token punctuation">,</span> _vertices<span class="token punctuation">.</span>Length<span class="token punctuation">,</span> BufferUsage<span class="token punctuation">.</span>WriteOnly<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token function">GenerateIndexArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            _indexBuffer <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name constructor-invocation">IndexBuffer</span><span class="token punctuation">(</span>GraphicsDevice<span class="token punctuation">,</span> <span class="token keyword keyword-typeof">typeof</span><span class="token punctuation">(</span><span class="token class-name type-expression"><span class="token keyword keyword-uint">uint</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span> _indices<span class="token punctuation">.</span>Length<span class="token punctuation">,</span> BufferUsage<span class="token punctuation">.</span>WriteOnly<span class="token punctuation">)</span><span class="token punctuation">;</span>
            _indexBuffer<span class="token punctuation">.</span><span class="token function">SetData</span><span class="token punctuation">(</span>_indices<span class="token punctuation">)</span><span class="token punctuation">;</span>

            _indicesChanged <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        _vertexBuffer<span class="token punctuation">.</span><span class="token function">SetData</span><span class="token punctuation">(</span>_vertices<span class="token punctuation">)</span><span class="token punctuation">;</span>
        GraphicsDevice<span class="token punctuation">.</span><span class="token function">SetVertexBuffer</span><span class="token punctuation">(</span>_vertexBuffer<span class="token punctuation">)</span><span class="token punctuation">;</span>

        GraphicsDevice<span class="token punctuation">.</span>Indices <span class="token operator">=</span> _indexBuffer<span class="token punctuation">;</span>

        _firstShader<span class="token punctuation">.</span>Parameters<span class="token punctuation">[</span><span class="token string">"view_projection"</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">SetValue</span><span class="token punctuation">(</span>_view <span class="token operator">*</span> _projection<span class="token punctuation">)</span><span class="token punctuation">;</span>
        GraphicsDevice<span class="token punctuation">.</span>RasterizerState <span class="token operator">=</span> RasterizerState<span class="token punctuation">.</span>CullCounterClockwise<span class="token punctuation">;</span>
        GraphicsDevice<span class="token punctuation">.</span>DepthStencilState <span class="token operator">=</span> DepthStencilState<span class="token punctuation">.</span>None<span class="token punctuation">;</span>
        GraphicsDevice<span class="token punctuation">.</span>BlendState <span class="token operator">=</span> BlendState<span class="token punctuation">.</span>AlphaBlend<span class="token punctuation">;</span>
        GraphicsDevice<span class="token punctuation">.</span>SamplerStates<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> _sampler<span class="token punctuation">;</span>

        _firstShader<span class="token punctuation">.</span>CurrentTechnique<span class="token punctuation">.</span>Passes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">Apply</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        GraphicsDevice<span class="token punctuation">.</span>Textures<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> _texture<span class="token punctuation">;</span>

        GraphicsDevice<span class="token punctuation">.</span><span class="token function">DrawIndexedPrimitives</span><span class="token punctuation">(</span>PrimitiveType<span class="token punctuation">.</span>TriangleList<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> _triangleCount<span class="token punctuation">)</span><span class="token punctuation">;</span>

        _triangleCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        _vertexCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        _indexCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

        <span class="token comment">// TODO: Restore old states like rasterizer, depth stencil, blend state?</span>
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-private">private</span> <span class="token class-name return-type"><span class="token keyword keyword-bool">bool</span></span> <span class="token generic-method"><span class="token function">EnsureSizeOrDouble</span><span class="token class-name generic"><span class="token punctuation">&lt;</span>T<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token keyword keyword-ref">ref</span> <span class="token class-name">T<span class="token punctuation">[</span><span class="token punctuation">]</span></span> array<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword keyword-int">int</span></span> neededCapacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>array<span class="token punctuation">.</span>Length <span class="token operator">&lt;</span> neededCapacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            Array<span class="token punctuation">.</span><span class="token function">Resize</span><span class="token punctuation">(</span><span class="token keyword keyword-ref">ref</span> array<span class="token punctuation">,</span> array<span class="token punctuation">.</span>Length <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword keyword-return">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword keyword-return">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-private">private</span> <span class="token class-name return-type"><span class="token keyword keyword-void">void</span></span> <span class="token function">GenerateIndexArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword keyword-for">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword keyword-uint">uint</span></span> i <span class="token operator">=</span> _fromIndex<span class="token punctuation">,</span> j <span class="token operator">=</span> _fromVertex<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> _indices<span class="token punctuation">.</span>Length<span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">6</span><span class="token punctuation">,</span> j <span class="token operator">+=</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            _indices<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> j <span class="token operator">+</span> <span class="token number">0</span><span class="token punctuation">;</span>
            _indices<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
            _indices<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> j <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">;</span>
            _indices<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
            _indices<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> j <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">;</span>
            _indices<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> j <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        _fromIndex <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword keyword-uint">uint</span><span class="token punctuation">)</span>_indices<span class="token punctuation">.</span>Length<span class="token punctuation">;</span>
        _fromVertex <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword keyword-uint">uint</span><span class="token punctuation">)</span>_vertices<span class="token punctuation">.</span>Length<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword keyword-private">private</span> <span class="token class-name">GraphicsDeviceManager</span> _graphics<span class="token punctuation">;</span>

    <span class="token keyword keyword-private">private</span> <span class="token class-name">Texture2D</span> _image <span class="token operator">=</span> <span class="token keyword keyword-null">null</span><span class="token operator">!</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-private">private</span> <span class="token class-name">Effect</span> _firstShader <span class="token operator">=</span> <span class="token keyword keyword-null">null</span><span class="token operator">!</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-private">private</span> <span class="token keyword keyword-const">const</span> <span class="token class-name"><span class="token keyword keyword-int">int</span></span> _initialSprites <span class="token operator">=</span> <span class="token number">2048</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-private">private</span> <span class="token keyword keyword-const">const</span> <span class="token class-name"><span class="token keyword keyword-int">int</span></span> _initialVertices <span class="token operator">=</span> _initialSprites <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-private">private</span> <span class="token keyword keyword-const">const</span> <span class="token class-name"><span class="token keyword keyword-int">int</span></span> _initialIndices <span class="token operator">=</span> _initialSprites <span class="token operator">*</span> <span class="token number">6</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-private">private</span> <span class="token class-name">SamplerState</span> _sampler <span class="token operator">=</span> <span class="token keyword keyword-null">null</span><span class="token operator">!</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-private">private</span> <span class="token class-name">Texture2D</span> _texture <span class="token operator">=</span> <span class="token keyword keyword-null">null</span><span class="token operator">!</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-private">private</span> <span class="token class-name">Matrix</span> _view<span class="token punctuation">;</span>
    <span class="token keyword keyword-private">private</span> <span class="token class-name">Matrix</span> _projection<span class="token punctuation">;</span>

    <span class="token keyword keyword-private">private</span> <span class="token class-name">FirstVertex<span class="token punctuation">[</span><span class="token punctuation">]</span></span> _vertices <span class="token operator">=</span> <span class="token keyword keyword-null">null</span><span class="token operator">!</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-private">private</span> <span class="token class-name"><span class="token keyword keyword-uint">uint</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> _indices <span class="token operator">=</span> <span class="token keyword keyword-null">null</span><span class="token operator">!</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-private">private</span> <span class="token class-name">DynamicVertexBuffer</span> _vertexBuffer <span class="token operator">=</span> <span class="token keyword keyword-null">null</span><span class="token operator">!</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-private">private</span> <span class="token class-name">IndexBuffer</span> _indexBuffer <span class="token operator">=</span> <span class="token keyword keyword-null">null</span><span class="token operator">!</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-private">private</span> <span class="token class-name"><span class="token keyword keyword-int">int</span></span> _triangleCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-private">private</span> <span class="token class-name"><span class="token keyword keyword-int">int</span></span> _vertexCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-private">private</span> <span class="token class-name"><span class="token keyword keyword-int">int</span></span> _indexCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-private">private</span> <span class="token class-name"><span class="token keyword keyword-bool">bool</span></span> _indicesChanged <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-private">private</span> <span class="token class-name"><span class="token keyword keyword-uint">uint</span></span> _fromIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-private">private</span> <span class="token class-name"><span class="token keyword keyword-uint">uint</span></span> _fromVertex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></div><h2 id="explanation">Explanation</h2><p>A standard game has a game loop that does logic executed on the CPU and rendering that is done on the GPU. To render, data has to be passed by messages sent from the CPU to the GPU, usually referred to as a draw call. Each draw call will take some time to execute. Typically games have a time budget for each frame of 16.6 milliseconds (60 FPS). For this reason, an optimization technique is to batch or combine as many draw calls as possible to minimize the amount of total draw calls.</p><p>This batcher is designed to render quads. A quad is a shape built from four vertices. We can attach data to a vertex which can then be used inside of a shader.</p><p>The MonoGame SpriteBatch defines a vertex as a position, color, and texture coordinate (using the <code>VertexPositionColorTexture</code> type). We’ll build our own vertex type called <code>FirstVertex</code> to have more freedom over what can be passed to the shader.</p><hr><p>This batcher will allow 2048 different quads in a single batch to start and grow as needed. A single quad is built from 4 vertices.</p><div class="code-select"><div class="code-highlight" lang="csharp"><pre class="syntax"><code><span class="line-numbers" aria-hidden="true" style="counter-reset: linenumber 0"><span></span><span></span><span></span></span><span class="token keyword keyword-private">private</span> <span class="token keyword keyword-const">const</span> <span class="token class-name"><span class="token keyword keyword-int">int</span></span> _initialQuads <span class="token operator">=</span> <span class="token number">2048</span><span class="token punctuation">;</span>
<span class="token keyword keyword-private">private</span> <span class="token keyword keyword-const">const</span> <span class="token class-name"><span class="token keyword keyword-int">int</span></span> _initialVertices <span class="token operator">=</span> _initialQuads <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span>
<span class="token keyword keyword-private">private</span> <span class="token keyword keyword-const">const</span> <span class="token class-name"><span class="token keyword keyword-int">int</span></span> _initialIndices <span class="token operator">=</span> _initialQuads <span class="token operator">*</span> <span class="token number">6</span><span class="token punctuation">;</span>
</code></pre></div></div><div class="code-select"><div class="code-highlight" lang="csharp"><pre class="syntax"><code><span class="line-numbers" aria-hidden="true" style="counter-reset: linenumber 0"><span></span><span></span></span>_vertices <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name constructor-invocation">FirstVertex</span><span class="token punctuation">[</span>_initialVertices<span class="token punctuation">]</span><span class="token punctuation">;</span>
_indices <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name constructor-invocation"><span class="token keyword keyword-uint">uint</span></span><span class="token punctuation">[</span>_initialIndices<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div></div><hr><p>GPUs are designed to draw triangles natively. We could represent the quad using two triangles built from 6 vertices, duplicating corner 1 and 3, but instead it’s possible to send an index array to reuse the same vertice for two different triangles. This helps save data.</p><p><img alt="Quad to triangle winding order." src="/tutorial/first-batcher/quad-winding-order.png"></p><p>The winding (clockwise) order is important since the GPU uses it to determine the front and the back of the triangles. You’ll notice later that we set the culling to <code>RasterizerState.CullCounterClockwise</code>. Triangles that are seen from behind would not get rendered. The first triangle here is 0, 1, 3 and the second is 1, 2, 3.</p><div class="code-select"><div class="code-highlight" lang="csharp"><pre class="syntax"><code><span class="line-numbers" aria-hidden="true" style="counter-reset: linenumber 0"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span class="token keyword keyword-private">private</span> <span class="token class-name return-type"><span class="token keyword keyword-void">void</span></span> <span class="token function">GenerateIndexArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-for">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword keyword-uint">uint</span></span> i <span class="token operator">=</span> _fromIndex<span class="token punctuation">,</span> j <span class="token operator">=</span> _fromVertex<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> _indices<span class="token punctuation">.</span>Length<span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">6</span><span class="token punctuation">,</span> j <span class="token operator">+=</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        _indices<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> j <span class="token operator">+</span> <span class="token number">0</span><span class="token punctuation">;</span>
        _indices<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        _indices<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> j <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">;</span>
        _indices<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        _indices<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> j <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">;</span>
        _indices<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> j <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    _fromIndex <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword keyword-uint">uint</span><span class="token punctuation">)</span>_indices<span class="token punctuation">.</span>Length<span class="token punctuation">;</span>
    _fromVertex <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword keyword-uint">uint</span><span class="token punctuation">)</span>_vertices<span class="token punctuation">.</span>Length<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></div><p>This <code>GenerateIndexArray</code> function is coded this way to allow for resizing the index array later and start from the last index position.</p><hr><p><code>_vertices</code> and <code>_indices</code> are currently on the CPU. To pass them to the GPU, we use a VertexBuffer and IndexBuffer respectively so that they become a <code>GraphicsResource</code>. <code>DynamicVertexBuffer</code> means that we expect the content of the <code>_vertices</code> to change every frame.</p><div class="code-select"><div class="code-highlight" lang="csharp"><pre class="syntax"><code><span class="line-numbers" aria-hidden="true" style="counter-reset: linenumber 0"><span></span><span></span><span></span><span></span></span>_vertexBuffer <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name constructor-invocation">DynamicVertexBuffer</span><span class="token punctuation">(</span>GraphicsDevice<span class="token punctuation">,</span> <span class="token keyword keyword-typeof">typeof</span><span class="token punctuation">(</span><span class="token class-name type-expression">FirstVertex</span><span class="token punctuation">)</span><span class="token punctuation">,</span> _vertices<span class="token punctuation">.</span>Length<span class="token punctuation">,</span> BufferUsage<span class="token punctuation">.</span>WriteOnly<span class="token punctuation">)</span><span class="token punctuation">;</span>

_indexBuffer <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name constructor-invocation">IndexBuffer</span><span class="token punctuation">(</span>GraphicsDevice<span class="token punctuation">,</span> <span class="token keyword keyword-typeof">typeof</span><span class="token punctuation">(</span><span class="token class-name type-expression"><span class="token keyword keyword-uint">uint</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span> _indices<span class="token punctuation">.</span>Length<span class="token punctuation">,</span> BufferUsage<span class="token punctuation">.</span>WriteOnly<span class="token punctuation">)</span><span class="token punctuation">;</span>
_indexBuffer<span class="token punctuation">.</span><span class="token function">SetData</span><span class="token punctuation">(</span>_indices<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div><p>Since <code>_indices</code> only needs to be reuploaded when the batch resizes, we can send it right away using <code>SetData</code>. For <code>_vertices</code>, we’ll wait until we’re ready to send the batch before using <code>SetData</code>.</p><hr><p>The API design for this batcher is similar to the MonoGame SpriteBatch. I kept it simple so that you can adapt it to your needs. It provides 3 methods:</p><div class="code-select"><div class="code-highlight" lang="csharp"><pre class="syntax"><code><span class="line-numbers" aria-hidden="true" style="counter-reset: linenumber 0"><span></span></span><span class="token keyword keyword-public">public</span> <span class="token class-name return-type"><span class="token keyword keyword-void">void</span></span> <span class="token function">Begin</span><span class="token punctuation">(</span><span class="token class-name">Texture2D<span class="token punctuation">?</span></span> texture <span class="token operator">=</span> <span class="token keyword keyword-null">null</span><span class="token punctuation">,</span> <span class="token class-name">Matrix<span class="token punctuation">?</span></span> view <span class="token operator">=</span> <span class="token keyword keyword-null">null</span><span class="token punctuation">,</span> <span class="token class-name">Matrix<span class="token punctuation">?</span></span> projection <span class="token operator">=</span> <span class="token keyword keyword-null">null</span><span class="token punctuation">,</span> <span class="token class-name">SamplerState<span class="token punctuation">?</span></span> sampler <span class="token operator">=</span> <span class="token keyword keyword-null">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div><div class="code-select"><div class="code-highlight" lang="csharp"><pre class="syntax"><code><span class="line-numbers" aria-hidden="true" style="counter-reset: linenumber 0"><span></span></span><span class="token keyword keyword-public">public</span> <span class="token class-name return-type"><span class="token keyword keyword-void">void</span></span> <span class="token function">Draw</span><span class="token punctuation">(</span><span class="token class-name">Vector2</span> xy<span class="token punctuation">,</span> <span class="token class-name">Color<span class="token punctuation">?</span></span> color <span class="token operator">=</span> <span class="token keyword keyword-null">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div><div class="code-select"><div class="code-highlight" lang="csharp"><pre class="syntax"><code><span class="line-numbers" aria-hidden="true" style="counter-reset: linenumber 0"><span></span></span><span class="token keyword keyword-public">public</span> <span class="token class-name return-type"><span class="token keyword keyword-void">void</span></span> <span class="token function">End</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div><p>Notice that the texture to draw is passed as an argument in <code>Begin</code>. This is because changing the texture invalidates the batch and I wanted to keep <code>Draw</code> simpler for the purposes of this tutorial. I leave passing the texture in <code>Draw</code> as an exercise to the reader.</p><div class="code-select"><div class="code-highlight" lang="csharp"><pre class="syntax"><code><span class="line-numbers" aria-hidden="true" style="counter-reset: linenumber 0"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span class="token keyword keyword-public">public</span> <span class="token class-name return-type"><span class="token keyword keyword-void">void</span></span> <span class="token function">Draw</span><span class="token punctuation">(</span><span class="token class-name">Vector2</span> xy<span class="token punctuation">,</span> <span class="token class-name">Color<span class="token punctuation">?</span></span> color <span class="token operator">=</span> <span class="token keyword keyword-null">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">EnsureSizeOrDouble</span><span class="token punctuation">(</span><span class="token keyword keyword-ref">ref</span> _vertices<span class="token punctuation">,</span> _vertexCount <span class="token operator">+</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    _indicesChanged <span class="token operator">=</span> <span class="token function">EnsureSizeOrDouble</span><span class="token punctuation">(</span><span class="token keyword keyword-ref">ref</span> _indices<span class="token punctuation">,</span> _indexCount <span class="token operator">+</span> <span class="token number">6</span><span class="token punctuation">)</span> <span class="token operator">||</span> _indicesChanged<span class="token punctuation">;</span>

    <span class="token class-name">Vector2</span> topLeft <span class="token operator">=</span> xy <span class="token operator">+</span> <span class="token keyword keyword-new">new</span> <span class="token class-name constructor-invocation">Vector2</span><span class="token punctuation">(</span><span class="token number">0f</span><span class="token punctuation">,</span> <span class="token number">0f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Vector2</span> topRight <span class="token operator">=</span> xy <span class="token operator">+</span> <span class="token keyword keyword-new">new</span> <span class="token class-name constructor-invocation">Vector2</span><span class="token punctuation">(</span>_texture<span class="token punctuation">.</span>Width<span class="token punctuation">,</span> <span class="token number">0f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Vector2</span> bottomRight <span class="token operator">=</span> xy <span class="token operator">+</span> <span class="token keyword keyword-new">new</span> <span class="token class-name constructor-invocation">Vector2</span><span class="token punctuation">(</span>_texture<span class="token punctuation">.</span>Width<span class="token punctuation">,</span> _texture<span class="token punctuation">.</span>Height<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Vector2</span> bottomLeft <span class="token operator">=</span> xy <span class="token operator">+</span> <span class="token keyword keyword-new">new</span> <span class="token class-name constructor-invocation">Vector2</span><span class="token punctuation">(</span><span class="token number">0f</span><span class="token punctuation">,</span> _texture<span class="token punctuation">.</span>Height<span class="token punctuation">)</span><span class="token punctuation">;</span>

    color <span class="token operator">??=</span> Color<span class="token punctuation">.</span>White<span class="token punctuation">;</span>

    _vertices<span class="token punctuation">[</span>_vertexCount <span class="token operator">+</span> <span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name constructor-invocation">FirstVertex</span><span class="token punctuation">(</span>
        <span class="token keyword keyword-new">new</span> <span class="token class-name constructor-invocation">Vector3</span><span class="token punctuation">(</span>topLeft<span class="token punctuation">,</span> <span class="token number">0f</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword keyword-new">new</span> <span class="token class-name constructor-invocation">Vector2</span><span class="token punctuation">(</span><span class="token number">0f</span><span class="token punctuation">,</span> <span class="token number">0f</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        color<span class="token punctuation">.</span>Value
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    _vertices<span class="token punctuation">[</span>_vertexCount <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name constructor-invocation">FirstVertex</span><span class="token punctuation">(</span>
        <span class="token keyword keyword-new">new</span> <span class="token class-name constructor-invocation">Vector3</span><span class="token punctuation">(</span>topRight<span class="token punctuation">,</span> <span class="token number">0f</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword keyword-new">new</span> <span class="token class-name constructor-invocation">Vector2</span><span class="token punctuation">(</span><span class="token number">1f</span><span class="token punctuation">,</span> <span class="token number">0f</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        color<span class="token punctuation">.</span>Value
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    _vertices<span class="token punctuation">[</span>_vertexCount <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name constructor-invocation">FirstVertex</span><span class="token punctuation">(</span>
        <span class="token keyword keyword-new">new</span> <span class="token class-name constructor-invocation">Vector3</span><span class="token punctuation">(</span>bottomRight<span class="token punctuation">,</span> <span class="token number">0f</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword keyword-new">new</span> <span class="token class-name constructor-invocation">Vector2</span><span class="token punctuation">(</span><span class="token number">1f</span><span class="token punctuation">,</span> <span class="token number">1f</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        color<span class="token punctuation">.</span>Value
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    _vertices<span class="token punctuation">[</span>_vertexCount <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name constructor-invocation">FirstVertex</span><span class="token punctuation">(</span>
        <span class="token keyword keyword-new">new</span> <span class="token class-name constructor-invocation">Vector3</span><span class="token punctuation">(</span>bottomLeft<span class="token punctuation">,</span> <span class="token number">0f</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword keyword-new">new</span> <span class="token class-name constructor-invocation">Vector2</span><span class="token punctuation">(</span><span class="token number">0f</span><span class="token punctuation">,</span> <span class="token number">1f</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        color<span class="token punctuation">.</span>Value
    <span class="token punctuation">)</span><span class="token punctuation">;</span>

    _triangleCount <span class="token operator">+=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    _vertexCount <span class="token operator">+=</span> <span class="token number">4</span><span class="token punctuation">;</span>
    _indexCount <span class="token operator">+=</span> <span class="token number">6</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></div><p>The first part of Draw makes sure that we have enough room in the arrays to hold the quad. If there isn’t, the strategy is to double the size of the arrays.</p><p>After that the position of the quad is determined in world coordinates for all the vertices. In this case we just use the texture’s size directly offset by the <code>xy</code> parameter. You could add scaling or rotation math here. This batcher is designed for 2D rendering so the Z axis is hardcoded to 0 in the <code>Vector3</code> since we don’t care about it.</p><p>The second parameter in the <code>FirstVertex</code> is the texture coordinate. It’s a floating point value between 0 and 1. On the X axis, 0 means the left side of the texture and 1 means the right side. On the Y axis, 0 means the top side of the texture and 1 means the bottoms side. Here we hardcoded the values to use the full texture range but if you wanted to support sprite sheets, you could pass different values.</p><p>The third parameter is just a tint color that’s added for fun.</p><p>In the shader those values come in as:</p><div class="code-select"><div class="code-highlight" lang="hlsl"><pre class="syntax"><code><span class="line-numbers" aria-hidden="true" style="counter-reset: linenumber 0"><span></span><span></span><span></span><span></span><span></span></span><span class="token keyword keyword-struct">struct</span> <span class="token class-name">VertexInput</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-float4">float4</span> Position <span class="token operator">:</span> POSITION0<span class="token punctuation">;</span>
    <span class="token keyword keyword-float4">float4</span> TexCoord <span class="token operator">:</span> TEXCOORD0<span class="token punctuation">;</span>
    <span class="token keyword keyword-float4">float4</span> Color <span class="token operator">:</span> COLOR0<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></div><p>Since the quad requires two triangles, we add two to the triangle count. It requires four vertices so we add 4 to the vertex count. It requires 6 indices so we add six to the index count.</p><div class="code-select"><div class="code-highlight" lang="csharp"><pre class="syntax"><code><span class="line-numbers" aria-hidden="true" style="counter-reset: linenumber 0"><span></span><span></span><span></span></span>_triangleCount <span class="token operator">+=</span> <span class="token number">2</span><span class="token punctuation">;</span>
_vertexCount <span class="token operator">+=</span> <span class="token number">4</span><span class="token punctuation">;</span>
_indexCount <span class="token operator">+=</span> <span class="token number">6</span><span class="token punctuation">;</span>
</code></pre></div></div><hr><p>Finally there’s the <code>End</code> method:</p><div class="code-select"><div class="code-highlight" lang="csharp"><pre class="syntax"><code><span class="line-numbers" aria-hidden="true" style="counter-reset: linenumber 0"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span><span class="token keyword keyword-private">private</span> <span class="token class-name return-type"><span class="token keyword keyword-void">void</span></span> <span class="token function">End</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>_triangleCount <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword keyword-return">return</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>_indicesChanged<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        _vertexBuffer<span class="token punctuation">.</span><span class="token function">Dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        _indexBuffer<span class="token punctuation">.</span><span class="token function">Dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        _vertexBuffer <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name constructor-invocation">DynamicVertexBuffer</span><span class="token punctuation">(</span>GraphicsDevice<span class="token punctuation">,</span> <span class="token keyword keyword-typeof">typeof</span><span class="token punctuation">(</span><span class="token class-name type-expression">FirstVertex</span><span class="token punctuation">)</span><span class="token punctuation">,</span> _vertices<span class="token punctuation">.</span>Length<span class="token punctuation">,</span> BufferUsage<span class="token punctuation">.</span>WriteOnly<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token function">GenerateIndexArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        _indexBuffer <span class="token operator">=</span> <span class="token keyword keyword-new">new</span> <span class="token class-name constructor-invocation">IndexBuffer</span><span class="token punctuation">(</span>GraphicsDevice<span class="token punctuation">,</span> <span class="token keyword keyword-typeof">typeof</span><span class="token punctuation">(</span><span class="token class-name type-expression"><span class="token keyword keyword-uint">uint</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span> _indices<span class="token punctuation">.</span>Length<span class="token punctuation">,</span> BufferUsage<span class="token punctuation">.</span>WriteOnly<span class="token punctuation">)</span><span class="token punctuation">;</span>
        _indexBuffer<span class="token punctuation">.</span><span class="token function">SetData</span><span class="token punctuation">(</span>_indices<span class="token punctuation">)</span><span class="token punctuation">;</span>

        _indicesChanged <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    _vertexBuffer<span class="token punctuation">.</span><span class="token function">SetData</span><span class="token punctuation">(</span>_vertices<span class="token punctuation">)</span><span class="token punctuation">;</span>
    GraphicsDevice<span class="token punctuation">.</span><span class="token function">SetVertexBuffer</span><span class="token punctuation">(</span>_vertexBuffer<span class="token punctuation">)</span><span class="token punctuation">;</span>

    GraphicsDevice<span class="token punctuation">.</span>Indices <span class="token operator">=</span> _indexBuffer<span class="token punctuation">;</span>

    _firstShader<span class="token punctuation">.</span>Parameters<span class="token punctuation">[</span><span class="token string">"view_projection"</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">SetValue</span><span class="token punctuation">(</span>_view <span class="token operator">*</span> _projection<span class="token punctuation">)</span><span class="token punctuation">;</span>
    GraphicsDevice<span class="token punctuation">.</span>RasterizerState <span class="token operator">=</span> RasterizerState<span class="token punctuation">.</span>CullCounterClockwise<span class="token punctuation">;</span>
    GraphicsDevice<span class="token punctuation">.</span>DepthStencilState <span class="token operator">=</span> DepthStencilState<span class="token punctuation">.</span>None<span class="token punctuation">;</span>
    GraphicsDevice<span class="token punctuation">.</span>BlendState <span class="token operator">=</span> BlendState<span class="token punctuation">.</span>AlphaBlend<span class="token punctuation">;</span>
    GraphicsDevice<span class="token punctuation">.</span>SamplerStates<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> _sampler<span class="token punctuation">;</span>

    _firstShader<span class="token punctuation">.</span>CurrentTechnique<span class="token punctuation">.</span>Passes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">Apply</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    GraphicsDevice<span class="token punctuation">.</span>Textures<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> _texture<span class="token punctuation">;</span>

    GraphicsDevice<span class="token punctuation">.</span><span class="token function">DrawIndexedPrimitives</span><span class="token punctuation">(</span>PrimitiveType<span class="token punctuation">.</span>TriangleList<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> _triangleCount<span class="token punctuation">)</span><span class="token punctuation">;</span>

    _triangleCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    _vertexCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    _indexCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></div><p>This method sends the batch to the GPU to be drawn.</p><p>Of course, don’t do any work if nothing is being drawn (aka no triangles). If the indices have changed, regenerate the index array to add the missing indices and recreate the <code>GraphicsResource</code> (<code>DynamicVertexBuffer</code> and <code>IndexBuffer</code>).</p><p>Behind the scene, MonoGame doesn’t do any extra work if the indices haven’t changed:</p><div class="code-select"><div class="code-highlight" lang="csharp"><pre class="syntax"><code><span class="line-numbers" aria-hidden="true" style="counter-reset: linenumber 0"><span></span></span>GraphicsDevice<span class="token punctuation">.</span>Indices <span class="token operator">=</span> _indexBuffer<span class="token punctuation">;</span>
</code></pre></div></div><p>Here we set the rendering states for the current batch:</p><div class="code-select"><div class="code-highlight" lang="csharp"><pre class="syntax"><code><span class="line-numbers" aria-hidden="true" style="counter-reset: linenumber 0"><span></span><span></span><span></span><span></span><span></span><span></span></span>_firstShader<span class="token punctuation">.</span>Parameters<span class="token punctuation">[</span><span class="token string">"view_projection"</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">SetValue</span><span class="token punctuation">(</span>_view <span class="token operator">*</span> _projection<span class="token punctuation">)</span><span class="token punctuation">;</span>
GraphicsDevice<span class="token punctuation">.</span>RasterizerState <span class="token operator">=</span> RasterizerState<span class="token punctuation">.</span>CullCounterClockwise<span class="token punctuation">;</span>
GraphicsDevice<span class="token punctuation">.</span>DepthStencilState <span class="token operator">=</span> DepthStencilState<span class="token punctuation">.</span>None<span class="token punctuation">;</span>
GraphicsDevice<span class="token punctuation">.</span>BlendState <span class="token operator">=</span> BlendState<span class="token punctuation">.</span>AlphaBlend<span class="token punctuation">;</span>
GraphicsDevice<span class="token punctuation">.</span>SamplerStates<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> _sampler<span class="token punctuation">;</span>
GraphicsDevice<span class="token punctuation">.</span>Textures<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> _texture<span class="token punctuation">;</span>
</code></pre></div></div><p>Batching requires that all elements being drawn share the same global states. The only differences between what is drawn should be set in the vertices (our <code>FirstVertex</code> type). This is one of the reason that having your own batcher is beneficial since you can add more data that could be used in your shaders. A lot of the time, MonoGame devs have to work around the SpriteBatch limitations, having less efficient batches when the data they change globally could be set in the vertices that they don’t control. (SpriteSortMode.Immediate anyone?)</p><p>If any values here change, you have to end the batch.</p><h2 id="read-more">Read more</h2><ul><li><a href="https://simonschreibt.de/gat/renderhell/" target="_blank" rel="noopener noreferrer">Render Hell 2.0</a></li></ul><sub class="flex justify-end md:pb-0 pb-8 print:hidden"><a href="https://github.com/learn-monogame/learn-monogame.github.io/tree/main/docs/tutorial/first-batcher/README.md" class="edit-link">Edit this page on GitHub</a></sub></main></div></div></div></body></html>